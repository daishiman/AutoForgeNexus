# SonarCloud Configuration for AutoForgeNexus
# https://docs.sonarcloud.io/advanced-setup/analysis-parameters/

# ===================================
# プロジェクト基本情報
# ===================================
# 注意: 以下の値は各開発者の環境に合わせて変更してください
# SonarCloud Dashboard → Project Information から正しい値を取得
sonar.projectKey=daishiman_AutoForgeNexus  # YOUR_ORGANIZATION_AutoForgeNexus に変更
sonar.organization=daishiman  # YOUR_SONARCLOUD_ORGANIZATION に変更
sonar.projectName=AutoForgeNexus - AI Prompt Optimization System
sonar.projectVersion=1.0.0

# ===================================
# ソースコード設定
# ===================================
sonar.sources=backend/src,frontend/src
sonar.tests=backend/tests,frontend/tests

# 除外パターン
sonar.exclusions=\
  **/__pycache__/**,\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/.next/**,\
  **/.cache/**,\
  **/venv/**,\
  **/*.spec.ts,\
  **/*.spec.js,\
  **/*.test.ts,\
  **/*.test.js

# テストファイル除外（重複カウント防止）
sonar.test.exclusions=\
  **/*.spec.ts,\
  **/*.spec.js,\
  **/*.test.ts,\
  **/*.test.js,\
  **/tests/**,\
  **/__tests__/**

# ===================================
# Python設定
# ===================================
sonar.python.version=3.13
sonar.python.coverage.reportPaths=backend/coverage.xml
sonar.python.xunit.reportPath=backend/test-results.xml

# ===================================
# TypeScript/JavaScript設定
# ===================================
sonar.javascript.lcov.reportPaths=frontend/coverage/lcov.info
sonar.typescript.tsconfigPaths=frontend/tsconfig.json

# ===================================
# カバレッジ基準
# ===================================
# Backend: 80%以上必須
sonar.coverage.exclusions=\
  backend/tests/**,\
  backend/src/core/config/**,\
  backend/src/presentation/**

# Frontend: 75%以上必須
# （フロントエンドカバレッジ設定は52行目で定義済み）

# ===================================
# 品質ゲート設定
# ===================================
# 重複コード検出
sonar.cpd.exclusions=\
  **/migrations/**,\
  **/tests/**

# コードの複雑さ
sonar.issue.ignore.multicriteria=e1,e2

# Python: サイクロマティック複雑度 15以下
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S3776
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.py

# TypeScript: サイクロマティック複雑度 15以下
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.ts

# ===================================
# 追加設定
# ===================================
# SonarCloud URL
sonar.host.url=https://sonarcloud.io

# エンコーディング
sonar.sourceEncoding=UTF-8

# ログレベル
sonar.log.level=INFO

# ===================================
# セキュリティ設定
# ===================================
# セキュリティホットスポット検出有効化
sonar.security.hotspots.enabled=true

# ===================================
# Phase別設定コメント
# ===================================
# Phase 1-2: 基本構造のみ分析
# Phase 3: バックエンド品質基準（80%カバレッジ）適用
# Phase 4: データベース・ベクトル品質基準適用
# Phase 5: フロントエンド品質基準（75%カバレッジ）適用
# Phase 6: 統合品質基準（E2E、セキュリティ、パフォーマンス）適用
