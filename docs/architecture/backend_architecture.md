# AutoForgeNexus ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

## ğŸ¯ ã¯ã˜ã‚ã« - ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ **ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­è¨ˆã‚’èª¬æ˜ã—ã¾ã™ã€‚
**DDDï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼‰ã‚„ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’çŸ¥ã‚‰ãªã„æ–¹ã§ã‚‚ç†è§£ã§ãã‚‹**ã‚ˆã†ã«ã€å„æ¦‚å¿µã‚’ä¸å¯§ã«èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

### ğŸ”° åˆå¿ƒè€…å‘ã‘ã‚¬ã‚¤ãƒ‰

- **é’ã„å›²ã¿ï¼ˆğŸ’¡ï¼‰**: åˆå¿ƒè€…å‘ã‘ã®è§£èª¬
- **å®Ÿä¾‹**: å…·ä½“çš„ãªä½¿ç”¨ä¾‹ã§ç†è§£ã‚’åŠ©ã‘ã¾ã™
- **ãªãœå¿…è¦ã‹**: å„è¨­è¨ˆã®ç†ç”±ã‚’èª¬æ˜ã—ã¾ã™

---

## 1. ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ğŸ“Œ ã“ã®ã‚·ã‚¹ãƒ†ãƒ ãŒå®Ÿç¾ã™ã‚‹ã“ã¨

AutoForgeNexusã¯ã€**AIã¸ã®æŒ‡ç¤ºï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ã‚’èª°ã§ã‚‚ç°¡å˜ã«ä½œæˆãƒ»æ”¹å–„ã§ãã‚‹ã‚·ã‚¹ãƒ†ãƒ **ã§ã™ã€‚

#### ä¸»ãªæ©Ÿèƒ½

1. **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆæ”¯æ´**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å¯¾è©±ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆ
2. **è‡ªå‹•æœ€é©åŒ–**: AIãŒæ”¹å–„æ¡ˆã‚’ææ¡ˆ
3. **å“è³ªè©•ä¾¡**: è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å“è³ªã‚’æ¸¬å®š
4. **æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«**: è©•ä¾¡çµæœã‚’åŸºã«ç¶™ç¶šçš„æ”¹å–„

### 1.1 ä¸»è¦è¨­è¨ˆåŸå‰‡

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘è§£èª¬ - ãªãœã“ã‚Œã‚‰ã®è¨­è¨ˆåŸå‰‡ã‚’ä½¿ã†ã®ã‹ï¼Ÿ**

| è¨­è¨ˆåŸå‰‡                       | ç°¡å˜ãªèª¬æ˜                                   | ãªãœå¿…è¦ï¼Ÿ                               | å®Ÿä¾‹                                             |
| ------------------------------ | -------------------------------------------- | ---------------------------------------- | ------------------------------------------------ |
| **ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼ˆDDDï¼‰**    | ãƒ“ã‚¸ãƒã‚¹ã®ãƒ«ãƒ¼ãƒ«ã‚’ã‚³ãƒ¼ãƒ‰ã®ä¸­å¿ƒã«ç½®ãè¨­è¨ˆ     | ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã§ãªã„äººã§ã‚‚ç†è§£ã—ã‚„ã™ããªã‚‹ | ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã€Œè©•ä¾¡ã€ãªã©æ¥­å‹™ç”¨èªã‚’ãã®ã¾ã¾ä½¿ã† |
| **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**     | æ©Ÿèƒ½ã‚’å±¤ï¼ˆãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰ã«åˆ†ã‘ã¦æ•´ç†ã™ã‚‹æ–¹æ³•     | å¤‰æ›´ã«å¼·ãã€ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã«ãªã‚‹   | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å¤‰ãˆã¦ã‚‚ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯å¤‰æ›´ä¸è¦ |
| **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£** | ã€Œä½•ã‹ãŒèµ·ããŸã€ã“ã¨ã‚’é€šçŸ¥ã—ã¦å‡¦ç†ã™ã‚‹ä»•çµ„ã¿ | å¤§é‡ã®å‡¦ç†ã‚’åŠ¹ç‡çš„ã«å®Ÿè¡Œã§ãã‚‹           | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆå®Œäº† â†’ è‡ªå‹•ã§è©•ä¾¡é–‹å§‹              |
| **CQRS**                       | ãƒ‡ãƒ¼ã‚¿ã®ã€Œæ›¸ãè¾¼ã¿ã€ã¨ã€Œèª­ã¿è¾¼ã¿ã€ã‚’åˆ†ã‘ã‚‹   | ãã‚Œãã‚Œã‚’æœ€é©åŒ–ã§ãã¦é«˜é€Ÿã«ãªã‚‹         | ä¿å­˜ã¯ç¢ºå®Ÿã«ã€è¡¨ç¤ºã¯é«˜é€Ÿã«                       |
| **ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å¯¾å¿œ**       | å°†æ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆ†å‰²ã§ãã‚‹è¨­è¨ˆ                 | ã‚·ã‚¹ãƒ†ãƒ ãŒå¤§ãããªã£ã¦ã‚‚ç®¡ç†ã—ã‚„ã™ã„     | è©•ä¾¡æ©Ÿèƒ½ã ã‘åˆ¥ã‚µãƒ¼ãƒãƒ¼ã«ç§»å‹•å¯èƒ½                 |

## 2. ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼ˆDDDï¼‰

### 2.1 å¢ƒç•Œã¥ã‘ã‚‰ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆBounded Contextsï¼‰

```mermaid
graph TB
    subgraph "Prompt Engineering Context"
        PE[Prompt Engineering]
        PC[Prompt Creation]
        PO[Prompt Optimization]
        PV[Prompt Versioning]
    end

    subgraph "Evaluation Context"
        EV[Evaluation Engine]
        TE[Test Execution]
        ME[Metrics Analysis]
        RE[Report Generation]
    end

    subgraph "LLM Integration Context"
        LI[LLM Integration]
        MC[Model Configuration]
        RP[Request Processing]
        CM[Cost Management]
    end

    subgraph "User Interaction Context"
        UI[User Interaction]
        HI[Human-AI Interaction]
        FB[Feedback Loop]
        CL[Collaboration]
    end

    subgraph "Data Management Context"
        DM[Data Management]
        PS[Prompt Storage]
        HS[History Storage]
        TC[Test Case Storage]
    end

    PE -->|uses| LI
    PE -->|stores in| DM
    EV -->|uses| LI
    EV -->|retrieves from| DM
    UI -->|interacts with| PE
    UI -->|triggers| EV
```

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šã“ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒãƒƒãƒ—å›³ã®èª­ã¿æ–¹**

ã“ã®å›³ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’5ã¤ã®ã€Œå¢ƒç•Œã¥ã‘ã‚‰ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆç‹¬ç«‹ã—ãŸå°‚é–€é ˜åŸŸï¼‰ã€ã«åˆ†ã‘ãŸå…¨ä½“åƒã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

**ğŸ“¦ å„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆé ˜åŸŸï¼‰ã®å½¹å‰²ï¼š**

1. **Prompt Engineering Contextï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆé ˜åŸŸï¼‰**

   - PE: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®å…¨ä½“ç®¡ç†
   - PC: æ–°ã—ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œã‚‹æ©Ÿèƒ½
   - PO: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ãƒ»æœ€é©åŒ–ã™ã‚‹æ©Ÿèƒ½
   - PV: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼ˆGitã®ã‚ˆã†ãªå±¥æ­´ç®¡ç†ï¼‰
   - ğŸ¯ **ä¾‹**: ã€Œç”»åƒç”ŸæˆAIã«æ¸¡ã™ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆâ†’æ”¹å–„â†’ä¿å­˜ã€ã™ã‚‹é ˜åŸŸ

2. **Evaluation Contextï¼ˆè©•ä¾¡é ˜åŸŸï¼‰**

   - EV: è©•ä¾¡å‡¦ç†å…¨ä½“ã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ³
   - TE: å®Ÿéš›ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹æ©Ÿèƒ½
   - ME: ãƒ†ã‚¹ãƒˆçµæœã‚’æ•°å€¤ã§åˆ†æã™ã‚‹æ©Ÿèƒ½
   - RE: åˆ†æçµæœã‚’ãƒ¬ãƒãƒ¼ãƒˆã«ã¾ã¨ã‚ã‚‹æ©Ÿèƒ½
   - ğŸ¯
     **ä¾‹**: ã€Œä½œã£ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæœ¬å½“ã«è‰¯ã„ã‹10å€‹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§æ¤œè¨¼ã€ã™ã‚‹é ˜åŸŸ

3. **LLM Integration Contextï¼ˆAIé€£æºé ˜åŸŸï¼‰**

   - LI: æ§˜ã€…ãªAIï¼ˆChatGPTã€Claudeç­‰ï¼‰ã¨ã®æ¥ç¶šç®¡ç†
   - MC: ã©ã®AIãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã†ã‹è¨­å®š
   - RP: AIã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†
   - CM: APIåˆ©ç”¨æ–™é‡‘ã®ç®¡ç†
   - ğŸ¯ **ä¾‹**: ã€Œ100ç¨®é¡ä»¥ä¸Šã®AIã‚µãƒ¼ãƒ“ã‚¹ã¨æ¥ç¶šã—ã¦ä½¿ã„åˆ†ã‘ã‚‹ã€é ˜åŸŸ

4. **User Interaction Contextï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œé ˜åŸŸï¼‰**

   - UI: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å…¨èˆ¬
   - HI: äººé–“ã¨AIã®å¯¾è©±ç®¡ç†
   - FB: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†
   - CL: è¤‡æ•°äººã§ã®å”åƒä½œæ¥­ã‚µãƒãƒ¼ãƒˆ
   - ğŸ¯ **ä¾‹**: ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ–ãƒ©ã‚¦ã‚¶ã§æ“ä½œã™ã‚‹ç”»é¢ã€ã®é ˜åŸŸ

5. **Data Management Contextï¼ˆãƒ‡ãƒ¼ã‚¿ç®¡ç†é ˜åŸŸï¼‰**
   - DM: ãƒ‡ãƒ¼ã‚¿ç®¡ç†å…¨èˆ¬
   - PS: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜
   - HS: ä¼šè©±å±¥æ­´ã®ä¿å­˜
   - TC: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆå…¥åŠ›ã¨æœŸå¾…å‡ºåŠ›ï¼‰ã®ä¿å­˜
   - ğŸ¯ **ä¾‹**: ã€Œã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å®‰å…¨ã«ä¿å­˜ãƒ»å–ã‚Šå‡ºã—ã€ã™ã‚‹é ˜åŸŸ

**ğŸ”„ çŸ¢å°ã®æ„å‘³ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆé–“ã®é–¢ä¿‚ï¼‰ï¼š**

- `PE -->|uses| LI`: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆãŒAIé€£æºã‚’ã€Œä½¿ã†ã€

  - ğŸ’¡ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œã‚‹æ™‚ã€å®Ÿéš›ã«AIã‚’å‘¼ã³å‡ºã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹

- `PE -->|stores in| DM`: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆãŒãƒ‡ãƒ¼ã‚¿ç®¡ç†ã«ã€Œä¿å­˜ã™ã‚‹ã€

  - ğŸ’¡ ä½œã£ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜

- `EV -->|uses| LI`: è©•ä¾¡ã‚¨ãƒ³ã‚¸ãƒ³ãŒAIé€£æºã‚’ã€Œä½¿ã†ã€

  - ğŸ’¡ è©•ä¾¡ã™ã‚‹æ™‚ã«æ§˜ã€…ãªAIã‚’å‘¼ã³å‡ºã—ã¦æ¯”è¼ƒ

- `EV -->|retrieves from| DM`: è©•ä¾¡ã‚¨ãƒ³ã‚¸ãƒ³ãŒãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‹ã‚‰ã€Œå–å¾—ã™ã‚‹ã€

  - ğŸ’¡ ä¿å­˜ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã‚“ã§å®Ÿè¡Œ

- `UI -->|interacts with| PE`: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆã¨ã€Œã‚„ã‚Šå–ã‚Šã™ã‚‹ã€

  - ğŸ’¡ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç”»é¢ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆãƒ»ç·¨é›†

- `UI -->|triggers| EV`: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œãŒè©•ä¾¡ã‚’ã€Œå®Ÿè¡Œé–‹å§‹ã™ã‚‹ã€
  - ğŸ’¡ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œè©•ä¾¡é–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨è©•ä¾¡ãŒå§‹ã¾ã‚‹

**ğŸ¯ ãªãœã“ã®ã‚ˆã†ã«åˆ†ã‘ã‚‹ã®ã‹ï¼Ÿ**

- å„é ˜åŸŸãŒç‹¬ç«‹ â†’ ä¸€ã¤ã‚’å¤‰æ›´ã—ã¦ã‚‚ä»–ã«å½±éŸ¿ã—ãªã„
- å°‚é–€æ€§ã‚’ä¿ã¤ â†’ å„ãƒãƒ¼ãƒ ãŒè‡ªåˆ†ã®é ˜åŸŸã«é›†ä¸­ã§ãã‚‹
- æ‹¡å¼µã—ã‚„ã™ã„ â†’ æ–°æ©Ÿèƒ½ã‚’é©åˆ‡ãªé ˜åŸŸã«è¿½åŠ ã™ã‚‹ã ã‘
- ç†è§£ã—ã‚„ã™ã„ â†’ å…¨ä½“ã‚’5ã¤ã®ç®±ã¨ã—ã¦æŠŠæ¡ã§ãã‚‹

### 2.2 ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªï¼ˆUbiquitous Languageï¼‰

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªã¨ã¯ï¼Ÿ**

> ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªã¨ã¯ã€é–‹ç™ºãƒãƒ¼ãƒ å…¨å“¡ï¼ˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã€ãƒ“ã‚¸ãƒã‚¹å´ï¼‰ãŒå…±é€šã—ã¦ä½¿ã†ã€Œå°‚é–€ç”¨èªé›†ã€ã®ã“ã¨ã§ã™ã€‚
>
> **ãªãœå¿…è¦ï¼Ÿ**
>
> - ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã¨ã„ã†è¨€è‘‰ãŒäººã«ã‚ˆã£ã¦é•ã†æ„å‘³ã ã¨æ··ä¹±ã™ã‚‹
> - å…¨å“¡ãŒåŒã˜è¨€è‘‰ã‚’ä½¿ã†ã“ã¨ã§ã€èª¤è§£ã‚’é˜²ãã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚‹
>
> **ä¾‹ï¼š**
> âŒ æ‚ªã„ä¾‹ï¼šã€Œã‚ã‚Œã‚’ã‚ãã“ã«ä¿å­˜ã—ã¦ã€ãã‚Œã‚’è©•ä¾¡ã™ã‚‹ã€âœ… è‰¯ã„ä¾‹ï¼šã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã—ã¦ã€è©•ä¾¡ã‚’å®Ÿè¡Œã™ã‚‹ã€

#### ã‚³ã‚¢æ¦‚å¿µ

| ç”¨èª                            | å®šç¾©                                      | è²¬å‹™                                   |
| ------------------------------- | ----------------------------------------- | -------------------------------------- |
| **Promptï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰**        | LLMã¸ã®å…¥åŠ›ã¨ã—ã¦è¨­è¨ˆã•ã‚ŒãŸæ§‹é€ åŒ–ãƒ†ã‚­ã‚¹ãƒˆ | æ„å›³ã‚’æ˜ç¢ºã«ä¼ãˆã€æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ã‚’å°ã |
| **Templateï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰**    | å†åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®éª¨æ ¼              | å…±é€šãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¨™æº–åŒ–ã¨åŠ¹ç‡åŒ–           |
| **Iterationï¼ˆã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰** | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ã®1ã‚µã‚¤ã‚¯ãƒ«                 | è©•ä¾¡â†’åˆ†æâ†’æ”¹å–„ææ¡ˆâ†’å®Ÿè£…                |
| **Evaluationï¼ˆè©•ä¾¡ï¼‰**          | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å“è³ªæ¸¬å®šãƒ—ãƒ­ã‚»ã‚¹              | å®šé‡çš„ãƒ»å®šæ€§çš„æŒ‡æ¨™ã«ã‚ˆã‚‹å“è³ªåˆ¤å®š       |
| **Test Caseï¼ˆãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼‰**   | å…¥åŠ›ã¨æœŸå¾…å‡ºåŠ›ã®ãƒšã‚¢                      | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ä¸€è²«æ€§ã¨å“è³ªã®æ¤œè¨¼         |
| **Conversationï¼ˆä¼šè©±ï¼‰**        | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨AIé–“ã®å¯¾è©±ã‚»ãƒƒã‚·ãƒ§ãƒ³            | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ã®ãŸã‚ã®å”èª¿çš„ã‚„ã‚Šå–ã‚Š   |
| **Versionï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰**       | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç‰¹å®šæ™‚ç‚¹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ    | å¤‰æ›´å±¥æ­´ã®ç®¡ç†ã¨ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯           |
| **Branchï¼ˆãƒ–ãƒ©ãƒ³ãƒï¼‰**          | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç‹¬ç«‹ã—ãŸé–‹ç™ºãƒ©ã‚¤ãƒ³            | ä¸¦è¡Œå®Ÿé¨“ã¨å®‰å…¨ãªæ”¹å–„                   |

#### ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆ            | èª¬æ˜                 | ãƒˆãƒªã‚¬ãƒ¼                       |
| ------------------- | -------------------- | ------------------------------ |
| PromptCreated       | æ–°è¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆ   | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’åˆæœŸä½œæˆ |
| PromptOptimized     | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–å®Œäº† | AI/ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹æ”¹å–„          |
| EvaluationCompleted | è©•ä¾¡å®Œäº†             | ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨åˆ†æå®Œäº†           |
| TestExecuted        | ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå®Œäº†       | å€‹åˆ¥ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®Ÿè¡Œ           |
| ReportGenerated     | ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†     | è©•ä¾¡çµæœã®é›†è¨ˆå®Œäº†             |
| VersionCreated      | æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä½œæˆ     | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ›´ã®ç¢ºå®š           |
| BranchMerged        | ãƒ–ãƒ©ãƒ³ãƒãƒãƒ¼ã‚¸å®Œäº†   | å®Ÿé¨“çµæœã®æœ¬æµçµ±åˆ             |

## 3. ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã¯ï¼Ÿ**

> ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’ã€Œå±¤ï¼ˆãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰ã€ã«åˆ†ã‘ã¦æ•´ç†ã™ã‚‹è¨­è¨ˆæ‰‹æ³•ã§ã™ã€‚
>
> **ãŸã¨ãˆè©±ï¼š** ä¼šç¤¾çµ„ç¹”ã®ã‚ˆã†ã«éšå±¤ãŒã‚ã‚Šã¾ã™ï¼š
>
> - **ç¤¾é•·ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼‰**ï¼šãƒ“ã‚¸ãƒã‚¹ã®æ ¸å¿ƒçš„ãªåˆ¤æ–­ã‚’ã™ã‚‹
> - **éƒ¨é•·ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰**ï¼šç¤¾é•·ã®æ–¹é‡ã‚’å…·ä½“çš„ãªæ¥­å‹™ã«è½ã¨ã—è¾¼ã‚€
> - **ç¾å ´ã‚¹ã‚¿ãƒƒãƒ•ï¼ˆã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼‰**ï¼šå®Ÿéš›ã®ä½œæ¥­ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œãªã©ï¼‰ã‚’è¡Œã†
> - **å—ä»˜ï¼ˆãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰**ï¼šå¤–éƒ¨ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹
>
> **é‡è¦ãªãƒ«ãƒ¼ãƒ«ï¼š**
>
> - ä¸‹ã®éšå±¤ã¯ä¸Šã®éšå±¤ã‚’çŸ¥ã‚‰ãªã„ï¼ˆç¾å ´ã¯ç¤¾é•·ã®è©³ç´°ã‚’çŸ¥ã‚‰ãªãã¦ã‚‚ä»•äº‹ã§ãã‚‹ï¼‰
> - ã“ã‚Œã«ã‚ˆã‚Šã€å„å±¤ã‚’ç‹¬ç«‹ã—ã¦å¤‰æ›´ãƒ»ãƒ†ã‚¹ãƒˆã§ãã‚‹

### 3.1 ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Presentation Layer                   â”‚
â”‚  (REST API, WebSocket, GraphQL, Event Handlers)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 Application Layer                    â”‚
â”‚   (Use Cases, Application Services, DTOs, CQRS)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Domain Layer                      â”‚
â”‚  (Entities, Value Objects, Domain Services, Events) â”‚
â”‚            âš ï¸ å¤–éƒ¨ä¾å­˜ãªã— - Pure Business Logic     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                Infrastructure Layer                  â”‚
â”‚  (Database, Cache, LLM Providers, Message Queue)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¾å­˜æ–¹å‘: â†“ (å¤–å´ã‹ã‚‰å†…å´ã¸ã®ã¿)
```

### 3.2 å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è©³ç´°è¨­è¨ˆ

#### 3.2.1 Domain Layerï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼‰

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã¨ã¯ï¼Ÿ**

> ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ¥­å‹™ã®æœ¬è³ªçš„ãªãƒ«ãƒ¼ãƒ«ï¼‰ã‚’æ›¸ãå ´æ‰€ã§ã™ã€‚
>
> **å…·ä½“ä¾‹ï¼š**
>
> - ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯æœ€ä½10æ–‡å­—å¿…è¦ã€ã¨ã„ã†ãƒ«ãƒ¼ãƒ«
> - ã€Œè©•ä¾¡ã‚¹ã‚³ã‚¢ã¯0ã€œ100ã®ç¯„å›²ã€ã¨ã„ã†åˆ¶ç´„
> - ã€Œãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯æœ€ä½3ã¤å¿…è¦ã€ã¨ã„ã†ãƒ“ã‚¸ãƒã‚¹è¦ä»¶
>
> **ç‰¹å¾´ï¼š**
>
> - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„WebAPIãªã©ã€æŠ€è¡“çš„ãªè©³ç´°ã«ã¯ä¸€åˆ‡è§¦ã‚Œãªã„
> - ç´”ç²‹ã«ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã ã‘ã‚’è¡¨ç¾
> - ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’MySQLã‹ã‚‰PostgreSQLã«å¤‰ãˆã¦ã‚‚ã€ã“ã®å±¤ã¯å¤‰æ›´ä¸è¦

**ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆEntitiesï¼‰**

ğŸ“š **ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ã¯ï¼Ÿ**

> ã€ŒIDã€ã‚’æŒã¡ã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãŒã‚ã‚‹ãƒ“ã‚¸ãƒã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
>
> **ä¾‹ï¼š**
>
> - **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**ï¼šIDã€Œprompt_123ã€ã‚’æŒã¡ã€ä½œæˆâ†’ç·¨é›†â†’è©•ä¾¡â†’æ”¹å–„ã¨ã„ã†æµã‚ŒãŒã‚ã‚‹
> - **è©•ä¾¡**ï¼šIDã€Œeval_456ã€ã‚’æŒã¡ã€å®Ÿè¡Œâ†’åˆ†æâ†’ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã¨ã„ã†æµã‚ŒãŒã‚ã‚‹
>
> **å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã®é•ã„ï¼š**
>
> - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼šã€Œå±±ç”°å¤ªéƒã•ã‚“ï¼ˆID: user_123ï¼‰ã€â† åŒå§“åŒåã§ã‚‚IDã§åŒºåˆ¥
> - å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼šã€Œ1000å††ã€â† ã©ã®1000å††ã§ã‚‚åŒã˜

```python
# ä¸»è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ§‹é€ 
class Prompt:
    - id: PromptId
    - content: PromptContent
    - template: Template
    - metadata: PromptMetadata
    - version: Version
    - status: PromptStatus
    - created_by: UserId
    - conversations: List[Conversation]
    - test_cases: List[TestCase]
    - evaluations: List[Evaluation]

class Evaluation:
    - id: EvaluationId
    - prompt_id: PromptId
    - metrics: EvaluationMetrics
    - test_results: List[TestResult]
    - report: EvaluationReport
    - recommendations: List[Recommendation]
    - executed_at: DateTime
    - configuration: EvaluationConfig

class TestCase:
    - id: TestCaseId
    - input: TestInput
    - expected_output: ExpectedOutput
    - tags: List[Tag]
    - weight: Float
    - validation_rules: List[ValidationRule]
```

**å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆValue Objectsï¼‰**

ğŸ“š **å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã¯ï¼Ÿ**

> IDã‚’æŒãŸãšã€å€¤ãã®ã‚‚ã®ã‚’è¡¨ç¾ã™ã‚‹ä¸å¤‰ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
>
> **ä¾‹ï¼š**
>
> - **é‡‘é¡**ï¼š1000å††ã¯èª°ãŒæŒã£ã¦ã„ã¦ã‚‚1000å††
> - **è©•ä¾¡ã‚¹ã‚³ã‚¢**ï¼š85ç‚¹ã¯å¸¸ã«85ç‚¹
> - **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**ï¼štest@example.comã¯åŒã˜æ–‡å­—åˆ—ãªã‚‰åŒã˜
>
> **ãªãœä½¿ã†ï¼Ÿ**
>
> - ã€Œaccuracy: 150ã€ã®ã‚ˆã†ãªä¸æ­£ãªå€¤ã‚’é˜²ã’ã‚‹ï¼ˆ0-100ã«åˆ¶é™ï¼‰
> - ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã‚’ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾ã§ãã‚‹
> - ãƒ†ã‚¹ãƒˆãŒã—ã‚„ã™ããªã‚‹

```python
# ä¸å¤‰ã®å€¤ã‚’è¡¨ç¾
class PromptContent:
    - text: str
    - variables: Dict[str, Any]
    - formatting: PromptFormatting

class EvaluationMetrics:
    - accuracy: Float
    - relevance: Float
    - coherence: Float
    - token_efficiency: Float
    - cost_efficiency: Float
    - custom_metrics: Dict[str, Float]

class LLMConfiguration:
    - provider: LLMProvider
    - model: ModelInfo
    - parameters: ModelParameters
    - cost_config: CostConfiguration
```

**é›†ç´„ï¼ˆAggregatesï¼‰**

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šé›†ç´„ã¨ã¯ï¼Ÿ**

> é›†ç´„ï¼ˆã—ã‚…ã†ã‚„ãï¼‰ã¨ã¯ã€ã€Œä¸€ç·’ã«æ‰±ã†ã¹ããƒ‡ãƒ¼ã‚¿ã®ã‚°ãƒ«ãƒ¼ãƒ—ã€ã§ã™ã€‚
>
> **ğŸ  å®¶æ—ã«ä¾‹ãˆã‚‹ã¨ï¼š**
>
> - å®¶æ—å…¨ä½“ = é›†ç´„
> - çˆ¶è¦ª = é›†ç´„ãƒ«ãƒ¼ãƒˆï¼ˆå®¶æ—ã®ä»£è¡¨ï¼‰
> - æ¯è¦ªã€å­ä¾› = é›†ç´„ã«å«ã¾ã‚Œã‚‹ãƒ¡ãƒ³ãƒãƒ¼
> - å®¶æ—ã®ãƒ«ãƒ¼ãƒ« = ä¸å¤‰æ¡ä»¶ï¼ˆä¾‹ï¼šå­ä¾›ã¯å¿…ãšä¿è­·è€…ãŒå¿…è¦ï¼‰
>
> **ãªãœé›†ç´„ãŒå¿…è¦ï¼Ÿ**
>
> - ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã‚’ä¿ã¤ï¼ˆå®¶æ—ã®ä½æ‰€ã¯å…¨å“¡åŒã˜ã«ã™ã‚‹ï¼‰
> - å¤‰æ›´ã®å˜ä½ã‚’æ˜ç¢ºã«ã™ã‚‹ï¼ˆå®¶æ—å˜ä½ã§å¼•ã£è¶Šã—ã™ã‚‹ï¼‰
> - è¤‡é›‘ãªé–¢ä¿‚ã‚’ç®¡ç†ã—ã‚„ã™ãã™ã‚‹

```python
# é›†ç´„ãƒ«ãƒ¼ãƒˆã¨å¢ƒç•Œ
PromptAggregate:
    - Root: Prompt
    - Includes: Template, Version, Conversation
    - Invariants:
        - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯å¿…ãš1ã¤ä»¥ä¸Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒã¤
        - ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯1ã¤ã®ã¿

EvaluationAggregate:
    - Root: Evaluation
    - Includes: TestResult, Report, Metrics
    - Invariants:
        - è©•ä¾¡ã¯å®Œäº†å¾Œå¤‰æ›´ä¸å¯
        - ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯å®Ÿè¡Œã•ã‚Œã‚‹

TestSuiteAggregate:
    - Root: TestSuite
    - Includes: TestCase, ValidationRule
    - Invariants:
        - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯å°‘ãªãã¨ã‚‚1ã¤å¿…è¦
        - é‡è¤‡ã™ã‚‹å…¥åŠ›ã¯è¨±å¯ã•ã‚Œãªã„
```

ğŸ“¦ **å„é›†ç´„ã®è©³ç´°èª¬æ˜ï¼š**

**1. PromptAggregateï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé›†ç´„ï¼‰**

- **Rootï¼ˆãƒ«ãƒ¼ãƒˆï¼‰**: Prompt = é›†ç´„ã®ä»£è¡¨è€…
- **å«ã¾ã‚Œã‚‹ã‚‚ã®**:
  - Templateï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã²ãªå½¢
  - Versionï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰: æ”¹å–„ã®å±¥æ­´
  - Conversationï¼ˆä¼šè©±ï¼‰: AIã¨ã®ã‚„ã‚Šå–ã‚Šå±¥æ­´
- **ä¸å¤‰æ¡ä»¶ï¼ˆå®ˆã‚‹ã¹ããƒ«ãƒ¼ãƒ«ï¼‰**:
  - âœ… ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯å¿…ãš1ã¤ä»¥ä¸Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒã¤
  - âœ… ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯å¸¸ã«1ã¤ã ã‘
- ğŸ¯ **å®Ÿä¾‹**: Gitã®ã‚ˆã†ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å¤‰æ›´å±¥æ­´ã‚’ç®¡ç†

**2. EvaluationAggregateï¼ˆè©•ä¾¡é›†ç´„ï¼‰**

- **Root**: Evaluation = è©•ä¾¡å…¨ä½“ã®ç®¡ç†è€…
- **å«ã¾ã‚Œã‚‹ã‚‚ã®**:
  - TestResultï¼ˆãƒ†ã‚¹ãƒˆçµæœï¼‰: å€‹ã€…ã®ãƒ†ã‚¹ãƒˆã®çµæœ
  - Reportï¼ˆãƒ¬ãƒãƒ¼ãƒˆï¼‰: è©•ä¾¡çµæœã®å ±å‘Šæ›¸
  - Metricsï¼ˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼‰: å“è³ªæŒ‡æ¨™ï¼ˆç‚¹æ•°ãªã©ï¼‰
- **ä¸å¤‰æ¡ä»¶**:
  - âœ… ä¸€åº¦å®Œäº†ã—ãŸè©•ä¾¡ã¯å¤‰æ›´ã§ããªã„ï¼ˆå…¬æ­£æ€§ã‚’ä¿ã¤ãŸã‚ï¼‰
  - âœ… ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆæŠœã‘ãŒãªã„ã‚ˆã†ã«ï¼‰
- ğŸ¯ **å®Ÿä¾‹**: ãƒ†ã‚¹ãƒˆã®æˆç¸¾è¡¨ã®ã‚ˆã†ã«ã€ã™ã¹ã¦ã®çµæœã‚’ã¾ã¨ã‚ã¦ç®¡ç†

**3. TestSuiteAggregateï¼ˆãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆé›†ç´„ï¼‰**

- **Root**: TestSuite = ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆå…¨ä½“
- **å«ã¾ã‚Œã‚‹ã‚‚ã®**:
  - TestCaseï¼ˆãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼‰: å€‹ã€…ã®ãƒ†ã‚¹ãƒˆé …ç›®
  - ValidationRuleï¼ˆæ¤œè¨¼ãƒ«ãƒ¼ãƒ«ï¼‰: åˆæ ¼åŸºæº–
- **ä¸å¤‰æ¡ä»¶**:
  - âœ… æœ€ä½1ã¤ã¯ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒå¿…è¦ï¼ˆç©ºã®ãƒ†ã‚¹ãƒˆã¯æ„å‘³ãŒãªã„ï¼‰
  - âœ… åŒã˜å…¥åŠ›ã®ãƒ†ã‚¹ãƒˆã¯ä½œã‚Œãªã„ï¼ˆé‡è¤‡é˜²æ­¢ï¼‰
- ğŸ¯ **å®Ÿä¾‹**: æœŸæœ«è©¦é¨“ã®ã‚ˆã†ã«ã€è¤‡æ•°ã®å•é¡Œã‚’ã‚»ãƒƒãƒˆã§ç®¡ç†

#### 3.2.2 Application Layerï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã¨ã¯ï¼Ÿ**

> ãƒ“ã‚¸ãƒã‚¹ã®ã€Œä½œæ¥­æ‰‹é †ã€ã‚’å®šç¾©ã™ã‚‹å±¤ã§ã™ã€‚æ–™ç†ã§è¨€ãˆã°ã€Œãƒ¬ã‚·ãƒ”ã€ã®ã‚ˆã†ãªå½¹å‰²ã§ã™ã€‚
>
> **å…·ä½“ä¾‹ï¼š** ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹ã€ã¨ã„ã†ä½œæ¥­ã®æ‰‹é †ï¼š
>
> 1. å…¥åŠ›å†…å®¹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
> 2. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç¢ºèªã™ã‚‹
> 3. åˆæœŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹
> 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹
> 5. ã€Œä½œæˆå®Œäº†ã€ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹
>
> **ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã¨ã®é•ã„ï¼š**
>
> - ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼šã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯10æ–‡å­—ä»¥ä¸Šã€ã¨ã„ã†ãƒ«ãƒ¼ãƒ«
> - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼šã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹æ‰‹é †ã€
>
> **ãªãœåˆ†ã‘ã‚‹ï¼Ÿ**
>
> - æ‰‹é †ã¯å¤‰ã‚ã‚Šã‚„ã™ã„ãŒã€ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã¯å¤‰ã‚ã‚Šã«ãã„
> - åŒã˜ãƒ«ãƒ¼ãƒ«ã‚’ç•°ãªã‚‹æ‰‹é †ã§ä½¿ã„å›ã›ã‚‹ï¼ˆWebã‹ã‚‰ã‚‚APIã‹ã‚‰ã‚‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆå¯èƒ½ï¼‰

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆUse Casesï¼‰**

ğŸ“š **ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã¯ï¼Ÿ**

> ã‚·ã‚¹ãƒ†ãƒ ãŒã§ãã‚‹ã“ã¨ï¼ˆæ©Ÿèƒ½ï¼‰ã‚’è¡¨ç¾ã—ãŸã‚‚ã®ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œã€œã—ãŸã„ã€ã¨ã„ã†è¦æ±‚ã«å¯¾ã—ã¦ã€ã‚·ã‚¹ãƒ†ãƒ ãŒã€Œã€œã™ã‚‹ã€ã¨ã„ã†å¿œç­”ã‚’å®šç¾©ã—ã¾ã™ã€‚
>
> **ä¾‹ï¼š**
>
> - ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã—ãŸã„ã€â†’ ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼šCreatePromptUseCase
> - ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šã€Œè©•ä¾¡ã‚’å®Ÿè¡Œã—ãŸã„ã€â†’ ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼šExecuteEvaluationUseCase

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šCQRSï¼ˆã‚³ãƒãƒ³ãƒ‰ãƒ»ã‚¯ã‚¨ãƒªè²¬ä»»åˆ†é›¢ï¼‰ã¨ã¯ï¼Ÿ**

> CQRSã¯ã€Œãƒ‡ãƒ¼ã‚¿ã®æ›¸ãè¾¼ã¿ï¼ˆã‚³ãƒãƒ³ãƒ‰ï¼‰ã€ã¨ã€Œãƒ‡ãƒ¼ã‚¿ã®èª­ã¿å–ã‚Šï¼ˆã‚¯ã‚¨ãƒªï¼‰ã€ã‚’åˆ¥ã€…ã«æ‰±ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚
>
> **ğŸª ã‚³ãƒ³ãƒ“ãƒ‹ã«ä¾‹ãˆã‚‹ã¨ï¼š**
>
> - **ã‚³ãƒãƒ³ãƒ‰å´** = ãƒ¬ã‚¸ã§ã®å•†å“è³¼å…¥ï¼ˆåœ¨åº«ãŒå¤‰ã‚ã‚‹ï¼‰
> - **ã‚¯ã‚¨ãƒªå´** = å•†å“ã®å€¤æ®µã‚’è¦‹ã‚‹ï¼ˆåœ¨åº«ã¯å¤‰ã‚ã‚‰ãªã„ï¼‰
>
> **ãªãœåˆ†ã‘ã‚‹ã®ï¼Ÿ**
>
> - æ›¸ãè¾¼ã¿ã¯ã€Œæ­£ç¢ºæ€§ã€é‡è¦–ï¼ˆãƒ¬ã‚¸ã§é–“é•ãˆãŸã‚‰å¤§å¤‰ï¼‰
> - èª­ã¿å–ã‚Šã¯ã€Œé€Ÿåº¦ã€é‡è¦–ï¼ˆå€¤æ®µã¯ã™ãçŸ¥ã‚ŠãŸã„ï¼‰
> - ãã‚Œãã‚Œæœ€é©åŒ–ã§ãã‚‹ï¼ˆãƒ¬ã‚¸ã¯1å°ã§ã‚‚ã€å€¤æœ­ã¯å•†å“å…¨éƒ¨ã«ä»˜ã‘ã‚‰ã‚Œã‚‹ï¼‰

```python
# ã‚³ãƒãƒ³ãƒ‰å´ï¼ˆCQRS - Commandï¼‰
class CreatePromptUseCase:
    - execute(command: CreatePromptCommand) -> PromptId
    - validate_template()
    - initialize_version()
    - publish_event(PromptCreatedEvent)

class OptimizePromptUseCase:
    - execute(command: OptimizePromptCommand) -> OptimizationResult
    - analyze_current_prompt()
    - generate_suggestions()
    - apply_improvements()
    - create_new_version()
    - publish_event(PromptOptimizedEvent)

class ExecuteEvaluationUseCase:
    - execute(command: ExecuteEvaluationCommand) -> EvaluationId
    - prepare_test_suite()
    - run_parallel_tests()
    - collect_results()
    - calculate_metrics()
    - generate_report()
    - publish_event(EvaluationCompletedEvent)

# ã‚¯ã‚¨ãƒªå´ï¼ˆCQRS - Queryï¼‰
class GetPromptDetailsQuery:
    - execute(query: PromptDetailsQuery) -> PromptDetailsDTO

class GetEvaluationReportQuery:
    - execute(query: EvaluationReportQuery) -> EvaluationReportDTO

class ListPromptVersionsQuery:
    - execute(query: PromptVersionsQuery) -> List[VersionDTO]
```

ğŸ“ **ã‚³ãƒãƒ³ãƒ‰å´ã®è©³ç´°èª¬æ˜ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹æ“ä½œï¼‰**

**1. CreatePromptUseCaseï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆï¼‰**

- **å½¹å‰²**: æ–°ã—ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹
- **å‡¦ç†ã®æµã‚Œ**:
  1. `validate_template()`: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒæ­£ã—ã„ã‹ç¢ºèª
  2. `initialize_version()`: æœ€åˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆv1.0ï¼‰ã‚’ä½œæˆ
  3. `publish_event()`: ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸã€ã¨é€šçŸ¥
- ğŸ¯ **å®Ÿä¾‹**: Wordã§æ–°ã—ã„æ–‡æ›¸ã‚’ä½œæˆã™ã‚‹ã‚ˆã†ãªæ“ä½œ

**2. OptimizePromptUseCaseï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–ï¼‰**

- **å½¹å‰²**: æ—¢å­˜ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã™ã‚‹
- **å‡¦ç†ã®æµã‚Œ**:
  1. `analyze_current_prompt()`: ç¾åœ¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å¼±ç‚¹ã‚’åˆ†æ
  2. `generate_suggestions()`: AIãŒæ”¹å–„æ¡ˆã‚’ææ¡ˆ
  3. `apply_improvements()`: æ”¹å–„ã‚’é©ç”¨
  4. `create_new_version()`: æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆv1.1ãªã©ï¼‰ã‚’ä½œæˆ
  5. `publish_event()`: ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæ”¹å–„ã•ã‚Œã¾ã—ãŸã€ã¨é€šçŸ¥
- ğŸ¯ **å®Ÿä¾‹**: æ–‡ç« ã®æ¨æ•²ã‚„æ ¡æ­£ã®ã‚ˆã†ãªä½œæ¥­

**3. ExecuteEvaluationUseCaseï¼ˆè©•ä¾¡å®Ÿè¡Œï¼‰**

- **å½¹å‰²**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å“è³ªã‚’è©•ä¾¡ã™ã‚‹
- **å‡¦ç†ã®æµã‚Œ**:
  1. `prepare_test_suite()`: ãƒ†ã‚¹ãƒˆã®æº–å‚™
  2. `run_parallel_tests()`: è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã‚’åŒæ™‚å®Ÿè¡Œï¼ˆé«˜é€ŸåŒ–ï¼‰
  3. `collect_results()`: çµæœã‚’é›†è¨ˆ
  4. `calculate_metrics()`: ç‚¹æ•°ã‚’è¨ˆç®—
  5. `generate_report()`: ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ
  6. `publish_event()`: ã€Œè©•ä¾¡ãŒå®Œäº†ã—ã¾ã—ãŸã€ã¨é€šçŸ¥
- ğŸ¯ **å®Ÿä¾‹**: å­¦æ ¡ã®ãƒ†ã‚¹ãƒˆæ¡ç‚¹ã‚·ã‚¹ãƒ†ãƒ 

ğŸ“– **ã‚¯ã‚¨ãƒªå´ã®è©³ç´°èª¬æ˜ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹æ“ä½œï¼‰**

**1. GetPromptDetailsQueryï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©³ç´°å–å¾—ï¼‰**

- **å½¹å‰²**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºç”¨ã«å–å¾—
- **ç‰¹å¾´**: ãƒ‡ãƒ¼ã‚¿ã¯å¤‰æ›´ã—ãªã„ã€é«˜é€Ÿã«å–å¾—
- ğŸ¯ **å®Ÿä¾‹**: å•†å“ã®è©³ç´°ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹

**2. GetEvaluationReportQueryï¼ˆè©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆå–å¾—ï¼‰**

- **å½¹å‰²**: è©•ä¾¡çµæœã®ãƒ¬ãƒãƒ¼ãƒˆã‚’å–å¾—
- **ç‰¹å¾´**: è¦‹ã‚„ã™ã„å½¢å¼ã«æ•´å½¢æ¸ˆã¿ï¼ˆDTO = Data Transfer Objectï¼‰
- ğŸ¯ **å®Ÿä¾‹**: æˆç¸¾è¡¨ã‚’è¦‹ã‚‹

**3. ListPromptVersionsQueryï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§å–å¾—ï¼‰**

- **å½¹å‰²**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å…¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒªã‚¹ãƒˆè¡¨ç¤º
- **ç‰¹å¾´**: å±¥æ­´ã‚’æ™‚ç³»åˆ—ã§è¡¨ç¤º
- ğŸ¯ **å®Ÿä¾‹**: Gitã®ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ã‚’è¦‹ã‚‹

âš¡ **ã‚³ãƒãƒ³ãƒ‰ã¨ã‚¯ã‚¨ãƒªã®é•ã„**

| é …ç›®             | ã‚³ãƒãƒ³ãƒ‰ï¼ˆæ›¸ãè¾¼ã¿ï¼‰     | ã‚¯ã‚¨ãƒªï¼ˆèª­ã¿å–ã‚Šï¼‰    |
| ---------------- | ------------------------ | --------------------- |
| **ç›®çš„**         | ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹         | ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹      |
| **ä¾‹**           | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆã€è©•ä¾¡å®Ÿè¡Œ | è©³ç´°è¡¨ç¤ºã€ä¸€è¦§è¡¨ç¤º    |
| **é‡è¦–ã™ã‚‹ç‚¹**   | æ­£ç¢ºæ€§ã€æ•´åˆæ€§           | é€Ÿåº¦ã€ä½¿ã„ã‚„ã™ã•      |
| **ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ** | ã™ã‚‹ï¼ˆå¤‰æ›´ã‚’é€šçŸ¥ï¼‰       | ã—ãªã„                |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**   | ä½¿ã‚ãªã„ï¼ˆæœ€æ–°ã‚’ä¿è¨¼ï¼‰   | ä½¿ã†ï¼ˆé«˜é€ŸåŒ–ï¼‰        |
| **çµæœ**         | IDè¿”å´ãŒå¤šã„             | æ•´å½¢æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ï¼ˆDTOï¼‰ |

**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹**

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã¨ã¯ï¼Ÿ**

> ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€è¤‡æ•°ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’çµ„ã¿åˆã‚ã›ã¦ã€Œå¤§ããªä»•äº‹ã€ã‚’å®Ÿè¡Œã™ã‚‹èª¿æ•´å½¹ã§ã™ã€‚
>
> **ğŸ­ ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©ã«ä¾‹ãˆã‚‹ã¨ï¼š**
>
> - ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ = å€‹ã€…ã®æ¥½å™¨å¥è€…
> - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ = æŒ‡æ®è€…
> - æŒ‡æ®è€…ãŒå„æ¥½å™¨ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èª¿æ•´ã—ã¦ç¾ã—ã„éŸ³æ¥½ã‚’ä½œã‚‹
>
> **ãªãœå¿…è¦ï¼Ÿ**
>
> - è¤‡é›‘ãªå‡¦ç†ã‚’æ•´ç†æ•´é “
> - è¤‡æ•°ã®å‡¦ç†ã‚’é©åˆ‡ãªé †ç•ªã§å®Ÿè¡Œ
> - ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ã‚‚å…¨ä½“ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«

```python
class PromptOrchestrationService:
    - create_optimization_workflow()
    - coordinate_human_ai_interaction()
    - manage_iterative_improvements()

class EvaluationPipelineService:
    - setup_parallel_execution()
    - coordinate_multi_llm_testing()
    - aggregate_cross_model_results()

class ReportingService:
    - generate_comprehensive_report()
    - create_improvement_recommendations()
    - track_progress_metrics()
```

ğŸ¯ **å„ã‚µãƒ¼ãƒ“ã‚¹ã®è©³ç´°èª¬æ˜**

**1. PromptOrchestrationServiceï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆèª¿æ•´ã‚µãƒ¼ãƒ“ã‚¹ï¼‰**

- **å½¹å‰²**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ä½œæˆã‹ã‚‰æœ€é©åŒ–ã¾ã§å…¨ä½“ã‚’ç®¡ç†
- **ä¸»ãªæ©Ÿèƒ½**:
  - `create_optimization_workflow()`: æ”¹å–„ã®ä½œæ¥­ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆ
    - ğŸ’¡ ä¾‹ï¼šã€Œä½œæˆâ†’è©•ä¾¡â†’æ”¹å–„â†’å†è©•ä¾¡ã€ã®æµã‚Œã‚’è‡ªå‹•åŒ–
  - `coordinate_human_ai_interaction()`: äººé–“ã¨AIã®å¯¾è©±ã‚’èª¿æ•´
    - ğŸ’¡ ä¾‹ï¼šAIã®ææ¡ˆâ†’äººé–“ã®ç¢ºèªâ†’AIã®å†ææ¡ˆã®ã‚µã‚¤ã‚¯ãƒ«
  - `manage_iterative_improvements()`: ç¹°ã‚Šè¿”ã—æ”¹å–„ã‚’ç®¡ç†
    - ğŸ’¡ ä¾‹ï¼š5å›æ”¹å–„ã—ã¦æœ€ã‚‚è‰¯ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸ã¶
- ğŸ¯ **å®Ÿä¾‹**: æ–‡ç« ã‚’ä½•åº¦ã‚‚æ¨æ•²ã—ã¦å®Œæˆã•ã›ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã®è‡ªå‹•åŒ–

**2. EvaluationPipelineServiceï¼ˆè©•ä¾¡ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ï¼‰**

- **å½¹å‰²**: è¤‡æ•°ã®AIã‚’ä½¿ã£ãŸå¤§è¦æ¨¡ãªè©•ä¾¡ãƒ†ã‚¹ãƒˆã‚’ç®¡ç†
- **ä¸»ãªæ©Ÿèƒ½**:
  - `setup_parallel_execution()`: ä¸¦åˆ—å®Ÿè¡Œã®æº–å‚™
    - ğŸ’¡ ä¾‹ï¼š10å€‹ã®ãƒ†ã‚¹ãƒˆã‚’åŒæ™‚ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†æº–å‚™
  - `coordinate_multi_llm_testing()`: è¤‡æ•°AIã§ã®ãƒ†ã‚¹ãƒˆèª¿æ•´
    - ğŸ’¡ ä¾‹ï¼šChatGPTã€Claudeã€Geminiã§åŒæ™‚ã«ãƒ†ã‚¹ãƒˆ
  - `aggregate_cross_model_results()`: ç•°ãªã‚‹AIã®çµæœã‚’çµ±åˆ
    - ğŸ’¡ ä¾‹ï¼šå„AIã®è©•ä¾¡ã‚’å¹³å‡ã—ã¦ç·åˆè©•ä¾¡ã‚’å‡ºã™
- ğŸ¯ **å®Ÿä¾‹**: è¤‡æ•°ã®æ¡ç‚¹è€…ãŒåŒæ™‚ã«ãƒ†ã‚¹ãƒˆã‚’æ¡ç‚¹ã—ã€çµæœã‚’ã¾ã¨ã‚ã‚‹

**3. ReportingServiceï¼ˆãƒ¬ãƒãƒ¼ãƒˆã‚µãƒ¼ãƒ“ã‚¹ï¼‰**

- **å½¹å‰²**: è©•ä¾¡çµæœã®åˆ†æã¨ãƒ¬ãƒãƒ¼ãƒˆä½œæˆã‚’ç®¡ç†
- **ä¸»ãªæ©Ÿèƒ½**:
  - `generate_comprehensive_report()`: ç·åˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
    - ğŸ’¡ ä¾‹ï¼šã‚°ãƒ©ãƒ•ã€è¡¨ã€ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãã®è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ
  - `create_improvement_recommendations()`: æ”¹å–„ææ¡ˆã‚’ä½œæˆ
    - ğŸ’¡ ä¾‹ï¼šã€Œã“ã®éƒ¨åˆ†ã‚’å¤‰ãˆã‚‹ã¨20%æ”¹å–„ã™ã‚‹ã€ã¨ã„ã†ææ¡ˆ
  - `track_progress_metrics()`: é€²æ—æŒ‡æ¨™ã‚’è¿½è·¡
    - ğŸ’¡ ä¾‹ï¼šæ”¹å–„ç‡ã€æˆåŠŸç‡ã€ã‚³ã‚¹ãƒˆå‰Šæ¸›ç‡ãªã©ã®æ¨ç§»
- ğŸ¯ **å®Ÿä¾‹**: æˆç¸¾è¡¨ã¨ä»Šå¾Œã®å­¦ç¿’ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã‚»ãƒƒãƒˆã§ä½œæˆ

ğŸ“Š **ã‚µãƒ¼ãƒ“ã‚¹é–“ã®é€£æºä¾‹**

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ã‚’ä¾é ¼
   â†“
2. PromptOrchestrationService ãŒå…¨ä½“ã‚’èª¿æ•´
   â”œâ”€â”€ ç¾çŠ¶åˆ†æ
   â”œâ”€â”€ AIææ¡ˆã‚’å–å¾—
   â””â”€â”€ äººé–“ã®ç¢ºèªå¾…ã¡
   â†“
3. EvaluationPipelineService ãŒè©•ä¾¡å®Ÿè¡Œ
   â”œâ”€â”€ 5ã¤ã®AIã§ä¸¦åˆ—ãƒ†ã‚¹ãƒˆ
   â”œâ”€â”€ 10å€‹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®Ÿè¡Œ
   â””â”€â”€ çµæœã‚’é›†è¨ˆ
   â†“
4. ReportingService ãŒãƒ¬ãƒãƒ¼ãƒˆä½œæˆ
   â”œâ”€â”€ è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
   â”œâ”€â”€ æ”¹å–„ãƒã‚¤ãƒ³ãƒˆæ˜ç¤º
   â””â”€â”€ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ææ¡ˆ
```

**ğŸ”‘ ãƒã‚¤ãƒ³ãƒˆï¼šã‚µãƒ¼ãƒ“ã‚¹ã¨ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®é•ã„**

| é …ç›®         | ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹        | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹             |
| ------------ | ------------------- | ------------------------------------ |
| **ç²’åº¦**     | å°ã•ã„ï¼ˆ1ã¤ã®æ©Ÿèƒ½ï¼‰ | å¤§ãã„ï¼ˆè¤‡æ•°ã®æ©Ÿèƒ½ã®çµ„ã¿åˆã‚ã›ï¼‰     |
| **ä¾‹**       | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆ      | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆâ†’è©•ä¾¡â†’æ”¹å–„ã®å…¨ä½“ãƒ•ãƒ­ãƒ¼ |
| **è²¬ä»»**     | 1ã¤ã®ã“ã¨ã ã‘       | å…¨ä½“ã®èª¿æ•´ã¨ç®¡ç†                     |
| **å®Ÿè¡Œæ™‚é–“** | çŸ­ã„ï¼ˆç§’ã€œåˆ†ï¼‰      | é•·ã„ï¼ˆåˆ†ã€œæ™‚é–“ï¼‰                     |

#### 3.2.3 Infrastructure Layerï¼ˆã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤ï¼‰

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤ã¨ã¯ï¼Ÿ**

> å®Ÿéš›ã®æŠ€è¡“çš„ãªå‡¦ç†ã‚’æ‹…å½“ã™ã‚‹å±¤ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œã€å¤–éƒ¨APIå‘¼ã³å‡ºã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãªã©ã‚’è¡Œã„ã¾ã™ã€‚
>
> **ãŸã¨ãˆè©±ï¼š** ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§è¨€ãˆã°ï¼š
>
> - ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼šæ–™ç†ã®å‘³ä»˜ã‘ãƒ«ãƒ¼ãƒ«ï¼ˆå¡©åˆ†3%ãªã©ï¼‰
> - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼šèª¿ç†æ‰‹é †ï¼ˆææ–™ã‚’åˆ‡ã‚‹â†’ç‚’ã‚ã‚‹â†’å‘³ä»˜ã‘ï¼‰
> - **ã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼šå®Ÿéš›ã®èª¿ç†å™¨å…·ï¼ˆåŒ…ä¸ã€ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³ã€ã‚³ãƒ³ãƒ­ï¼‰**
>
> **å…·ä½“ä¾‹ï¼š**
>
> - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼šTursoï¼ˆSQLiteãƒ™ãƒ¼ã‚¹ï¼‰ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä¿å­˜
> - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼šRedis ã§è©•ä¾¡çµæœã‚’é«˜é€Ÿå–å¾—
> - LLMå‘¼ã³å‡ºã—ï¼šLiteLLMçµŒç”±ã§100+ã®AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨é€šä¿¡
>
> **ãªãœåˆ†ã‘ã‚‹ï¼Ÿ**
>
> - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’Tursoã‹ã‚‰PostgreSQLã«å¤‰ãˆã¦ã‚‚ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯å¤‰æ›´ä¸è¦
> - ãƒ†ã‚¹ãƒˆæ™‚ã¯æœ¬ç‰©ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã¯ãªãã€ãƒ¢ãƒƒã‚¯ï¼ˆå½ç‰©ï¼‰ã‚’ä½¿ãˆã‚‹
> - å„æŠ€è¡“ã®å°‚é–€å®¶ãŒç‹¬ç«‹ã—ã¦ä½œæ¥­ã§ãã‚‹

**ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…**

ğŸ“š **ãƒªãƒã‚¸ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã¯ï¼Ÿ**

> ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»å–å¾—ã‚’æŠ½è±¡åŒ–ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚ã€Œã©ã†ã‚„ã£ã¦ä¿å­˜ã™ã‚‹ã‹ã€ã®è©³ç´°ã‚’éš ã—ã¦ã€ã€Œä¿å­˜ã™ã‚‹ã€ã€Œå–å¾—ã™ã‚‹ã€ã¨ã„ã†æ“ä½œã ã‘ã‚’æä¾›ã—ã¾ã™ã€‚
>
> **ãƒ¡ãƒªãƒƒãƒˆï¼š**
>
> - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è©³ç´°ã‚’çŸ¥ã‚‰ãªãã¦è‰¯ã„
> - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å¤‰æ›´ã—ã¦ã‚‚ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯å¤‰æ›´ä¸è¦
> - ãƒ†ã‚¹ãƒˆãŒç°¡å˜ï¼ˆãƒ¡ãƒ¢ãƒªä¸Šã®å½ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ãˆã‚‹ï¼‰

```python
class TursoPromptRepository(IPromptRepository):
    - save(prompt: Prompt) -> None
    - find_by_id(id: PromptId) -> Optional[Prompt]
    - find_by_user(user_id: UserId) -> List[Prompt]
    - update(prompt: Prompt) -> None

class RedisEvaluationCacheRepository:
    - cache_result(evaluation: Evaluation) -> None
    - get_cached(prompt_id: PromptId) -> Optional[Evaluation]
    - invalidate(prompt_id: PromptId) -> None
```

**LLMçµ±åˆã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼**

ğŸ“š **ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã¯ï¼Ÿ**

> ç•°ãªã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆæ¥ç¶šæ–¹æ³•ï¼‰ã‚’æŒã¤å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã€çµ±ä¸€çš„ã«æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚
>
> **ãŸã¨ãˆè©±ï¼š** å„å›½ã®é›»æºãƒ—ãƒ©ã‚°ã®é•ã„ã‚’å¤‰æ›ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã§çµ±ä¸€ã™ã‚‹ã®ã¨åŒã˜ã§ã™ï¼š
>
> - OpenAIã€Claudeã€Geminiãªã©ã€å„ç¤¾ã®APIã¯ç•°ãªã‚‹
> - LiteLLMã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãŒå…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«å¤‰æ›
> - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯1ã¤ã®æ–¹æ³•ã§å…¨ã¦ã®LLMã‚’ä½¿ãˆã‚‹

```python
class LiteLLMAdapter(ILLMProvider):
    - execute_prompt(prompt: str, config: LLMConfiguration) -> LLMResponse
    - estimate_cost(prompt: str, config: LLMConfiguration) -> CostEstimate
    - validate_configuration(config: LLMConfiguration) -> bool

class LangChainOrchestrator:
    - create_chain(steps: List[ChainStep]) -> Chain
    - execute_workflow(workflow: Workflow) -> WorkflowResult
```

**ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹å®Ÿè£…**

ğŸ“š **ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹ã¨ã¯ï¼Ÿ**

> ã‚·ã‚¹ãƒ†ãƒ å†…ã§ç™ºç”Ÿã—ãŸã€Œå‡ºæ¥äº‹ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã€ã‚’ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ä¼ãˆã‚‹ä»•çµ„ã¿ã§ã™ã€‚
>
> **ãŸã¨ãˆè©±ï¼š** éƒµä¾¿ã‚·ã‚¹ãƒ†ãƒ ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ï¼š
>
> - ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒä½œæˆã•ã‚ŒãŸã€ã¨ã„ã†æ‰‹ç´™ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã‚’æŠ•å‡½
> - éƒµä¾¿ãƒã‚¹ãƒˆï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹ï¼‰ãŒä¸­ç¶™
> - é–¢å¿ƒã®ã‚ã‚‹äººï¼ˆã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼ï¼‰ãŒå—ã‘å–ã£ã¦å‡¦ç†
>
> **ãƒ¡ãƒªãƒƒãƒˆï¼š**
>
> - é€ã‚Šæ‰‹ã¨å—ã‘æ‰‹ãŒç›´æ¥çŸ¥ã‚‰ãªãã¦è‰¯ã„ï¼ˆç–çµåˆï¼‰
> - éåŒæœŸå‡¦ç†ãŒå¯èƒ½ï¼ˆå¾Œã§ã¾ã¨ã‚ã¦å‡¦ç†ã§ãã‚‹ï¼‰
> - æ–°ã—ã„å—ã‘æ‰‹ã‚’ç°¡å˜ã«è¿½åŠ ã§ãã‚‹

```python
class RedisEventBus(IEventBus):
    - publish(event: DomainEvent) -> None
    - subscribe(event_type: Type[DomainEvent], handler: EventHandler) -> None
    - process_events() -> None
```

#### 3.2.4 Presentation Layerï¼ˆãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã¨ã¯ï¼Ÿ**

> ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®ã€Œçª“å£ã€ã¨ãªã‚‹å±¤ã§ã™ã€‚Web
> APIã€WebSocketã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãªã©ãŒå«ã¾ã‚Œã¾ã™ã€‚
>
> **ãŸã¨ãˆè©±ï¼š** ãŠåº—ã®ã€Œãƒ¬ã‚¸ã€ã‚„ã€Œå—ä»˜ã€ã®ã‚ˆã†ãªå½¹å‰²ã§ã™ï¼š
>
> - ãŠå®¢æ§˜ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã®æ³¨æ–‡ã‚’å—ã‘å–ã‚‹
> - æ³¨æ–‡å†…å®¹ã‚’ã‚­ãƒƒãƒãƒ³ï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰ã«ä¼ãˆã‚‹
> - å®Œæˆå“ã‚’ãŠå®¢æ§˜ã«æ¸¡ã™
>
> **ã“ã®å±¤ãŒã‚„ã‚‹ã“ã¨ï¼š**
>
> - HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å—ã‘å–ã‚Š
> - å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ï¼ˆæ–‡å­—æ•°ã€å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼‰
> - èªè¨¼ãƒ»èªå¯ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã‹ã€æ¨©é™ãŒã‚ã‚‹ã‹ï¼‰
> - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®æ•´å½¢ï¼ˆJSONã‚„HTMLã«å¤‰æ›ï¼‰

**REST API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**

```python
# FastAPI Controllers
@router.post("/api/v1/prompts")
async def create_prompt(request: CreatePromptRequest) -> PromptResponse

@router.put("/api/v1/prompts/{id}/optimize")
async def optimize_prompt(id: str, request: OptimizeRequest) -> OptimizationResponse

@router.post("/api/v1/evaluations")
async def execute_evaluation(request: EvaluationRequest) -> EvaluationResponse

@router.get("/api/v1/reports/{evaluation_id}")
async def get_report(evaluation_id: str) -> ReportResponse
```

**WebSocket ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**

```python
@websocket("/ws/optimization/{session_id}")
async def optimization_session(websocket: WebSocket, session_id: str):
    - handle_human_ai_interaction()
    - stream_optimization_progress()
    - broadcast_evaluation_updates()
```

## 4. ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã¯ï¼Ÿ**

> ã‚·ã‚¹ãƒ†ãƒ å†…ã®ã€Œå‡ºæ¥äº‹ã€ã‚’ä¸­å¿ƒã«è¨­è¨ˆã™ã‚‹æ‰‹æ³•ã§ã™ã€‚
>
> **æ—¥å¸¸ç”Ÿæ´»ã®ä¾‹ï¼š** Amazonã§è²·ã„ç‰©ã‚’ã™ã‚‹ã¨ï¼š
>
> 1. ã€Œæ³¨æ–‡ãŒå…¥ã£ãŸã€â†’ åœ¨åº«ç¢ºèªãŒå‹•ã
> 2. ã€Œæ±ºæ¸ˆãŒå®Œäº†ã—ãŸã€â†’ é…é€æº–å‚™ãŒå§‹ã¾ã‚‹
> 3. ã€Œç™ºé€ã•ã‚ŒãŸã€â†’ é€šçŸ¥ãƒ¡ãƒ¼ãƒ«ãŒé€ã‚‰ã‚Œã‚‹
>
> **æœ¬ã‚·ã‚¹ãƒ†ãƒ ã§ã®ä¾‹ï¼š**
>
> - ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒä½œæˆã•ã‚ŒãŸã€â†’ è‡ªå‹•ã§åˆæœŸè©•ä¾¡ã‚’é–‹å§‹
> - ã€Œè©•ä¾¡ãŒå®Œäº†ã—ãŸã€â†’ æ”¹å–„ææ¡ˆã‚’ç”Ÿæˆ
> - ã€Œæ”¹å–„ãŒé©ç”¨ã•ã‚ŒãŸã€â†’ æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½œæˆ
>
> **ãƒ¡ãƒªãƒƒãƒˆï¼š**
>
> - å„æ©Ÿèƒ½ãŒç‹¬ç«‹ã—ã¦å‹•ãï¼ˆè©•ä¾¡æ©Ÿèƒ½ãŒæ­¢ã¾ã£ã¦ã‚‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆã¯å¯èƒ½ï¼‰
> - æ–°æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã‚„ã™ã„ï¼ˆæ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆã‚’è´ãã ã‘ï¼‰
> - å‡¦ç†ãŒé…ã‚Œã¦ã‚‚å•é¡Œãªã„ï¼ˆéåŒæœŸå‡¦ç†ï¼‰

### 4.1 ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

```mermaid
graph LR
    subgraph "Command Side"
        CMD[Commands] --> CH[Command Handlers]
        CH --> AGG[Aggregates]
        AGG --> EVT[Domain Events]
    end

    subgraph "Event Bus"
        EVT --> EB[Redis Streams]
        EB --> SUB[Subscribers]
    end

    subgraph "Query Side"
        SUB --> PROJ[Projections]
        PROJ --> READ[Read Models]
        QRY[Queries] --> READ
    end

    subgraph "Side Effects"
        SUB --> SAGA[Sagas]
        SUB --> INT[Integrations]
        SUB --> NOT[Notifications]
    end
```

### 4.2 ä¸»è¦ã‚¤ãƒ™ãƒ³ãƒˆã¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼

| ã‚¤ãƒ™ãƒ³ãƒˆ          | ãƒãƒ³ãƒ‰ãƒ©ãƒ¼           | å‡¦ç†å†…å®¹             |
| ----------------- | -------------------- | -------------------- |
| PromptCreated     | VersionProjection    | ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´æ›´æ–°   |
|                   | NotificationHandler  | ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥é€ä¿¡     |
| PromptOptimized   | MetricsCalculator    | æ”¹å–„ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨ˆç®—   |
|                   | CacheInvalidator     | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–     |
| EvaluationStarted | TestOrchestrator     | ä¸¦åˆ—ãƒ†ã‚¹ãƒˆé–‹å§‹       |
|                   | ProgressTracker      | é€²æ—çŠ¶æ³è¿½è·¡         |
| TestCompleted     | ResultAggregator     | çµæœé›†è¨ˆ             |
|                   | CostCalculator       | ã‚³ã‚¹ãƒˆè¨ˆç®—           |
| ReportGenerated   | RecommendationEngine | æ”¹å–„ææ¡ˆç”Ÿæˆ         |
|                   | WorkflowTrigger      | æ¬¡ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹ |

## 5. CQRSï¼ˆã‚³ãƒãƒ³ãƒ‰ã‚¯ã‚¨ãƒªè²¬ä»»åˆ†é›¢ï¼‰

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šCQRSã¨ã¯ï¼Ÿ**

> ã€Œæ›¸ãè¾¼ã¿ã€ã¨ã€Œèª­ã¿å–ã‚Šã€ã‚’åˆ¥ã€…ã®ãƒ¢ãƒ‡ãƒ«ã§å‡¦ç†ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚
>
> **æ—¥å¸¸ç”Ÿæ´»ã®ä¾‹ï¼š** éŠ€è¡Œã®ATMã‚·ã‚¹ãƒ†ãƒ ã§è€ƒãˆã‚‹ã¨ï¼š
>
> - **æ›¸ãè¾¼ã¿ï¼ˆCommandï¼‰**ï¼šé€é‡‘ã€å¼•ãå‡ºã— â†’ å³å¯†ãªãƒã‚§ãƒƒã‚¯ã€é…ãã¦ã‚‚æ­£ç¢º
> - **èª­ã¿å–ã‚Šï¼ˆQueryï¼‰**ï¼šæ®‹é«˜ç…§ä¼š â†’ ç°¡å˜ãªå‡¦ç†ã€é«˜é€Ÿè¡¨ç¤º
>
> æ›¸ãè¾¼ã¿ã¨èª­ã¿å–ã‚Šã§ã¯è¦æ±‚ãŒé•ã†ãŸã‚ã€ãã‚Œãã‚Œã«æœ€é©åŒ–ã—ãŸä»•çµ„ã¿ã‚’ä½œã‚‹ã“ã¨ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚
>
> **æœ¬ã‚·ã‚¹ãƒ†ãƒ ã§ã®ä½¿ã„æ–¹ï¼š**
>
> - **Commandä¾‹**ï¼šã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã€ã€Œè©•ä¾¡ã‚’å®Ÿè¡Œã€â†’ ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã‚’å®ˆã‚‹
> - **Queryä¾‹**ï¼šã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¸€è¦§ã‚’è¡¨ç¤ºã€ã€Œãƒ¬ãƒãƒ¼ãƒˆã‚’å–å¾—ã€â†’ é«˜é€Ÿã«è¿”ã™
>
> **ãƒ¡ãƒªãƒƒãƒˆï¼š**
>
> - èª­ã¿å–ã‚Šã‚’é«˜é€ŸåŒ–ã§ãã‚‹ï¼ˆå°‚ç”¨ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚„DBã‚’ä½¿ãˆã‚‹ï¼‰
> - æ›¸ãè¾¼ã¿ã‚’å®‰å…¨ã«ã§ãã‚‹ï¼ˆå³å¯†ãªãƒã‚§ãƒƒã‚¯ãŒå¯èƒ½ï¼‰
> - ã‚¹ã‚±ãƒ¼ãƒ«ã—ã‚„ã™ã„ï¼ˆèª­ã¿è¾¼ã¿ã¨æ›¸ãè¾¼ã¿ã‚’åˆ¥ã€…ã«ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰

### 5.1 ã‚³ãƒãƒ³ãƒ‰ãƒ¢ãƒ‡ãƒ«

```python
# Write Model (Turso - Primary DB)
PromptWriteModel:
    - Normalized tables
    - Strong consistency
    - Transactional integrity
    - Audit logging

Tables:
    - prompts
    - prompt_versions
    - conversations
    - test_cases
    - evaluations
    - test_results
```

### 5.2 ã‚¯ã‚¨ãƒªãƒ¢ãƒ‡ãƒ«

```python
# Read Model (Redis + Turso Read Replicas)
PromptReadModel:
    - Denormalized views
    - Optimized for queries
    - Cached aggregations
    - Real-time updates

Views:
    - prompt_details_view
    - evaluation_summary_view
    - user_prompts_view
    - trending_templates_view
    - performance_metrics_view
```

### 5.3 åŒæœŸãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

```python
class ProjectionManager:
    async def handle_event(event: DomainEvent):
        match event:
            case PromptCreated():
                await update_prompt_list_projection(event)
                await update_user_stats_projection(event)
            case EvaluationCompleted():
                await update_evaluation_projection(event)
                await update_metrics_projection(event)
                await invalidate_cache(event.prompt_id)
```

## 6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã¯ï¼Ÿ**

> ã‚·ã‚¹ãƒ†ãƒ ã‚’å®ˆã‚‹ãŸã‚ã®ã€Œé˜²å¾¡ä»•çµ„ã¿ã€å…¨ä½“ã®è¨­è¨ˆã§ã™ã€‚
>
> **ãƒ“ãƒ«ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«ä¾‹ãˆã‚‹ã¨ï¼š**
>
> - **èªè¨¼ï¼ˆAuthenticationï¼‰**ï¼šç¤¾å“¡è¨¼ã§ã€Œèª°ã‹ã€ã‚’ç¢ºèª
> - **èªå¯ï¼ˆAuthorizationï¼‰**ï¼šãƒ•ãƒ­ã‚¢æ¨©é™ã§ã€Œã©ã“ã«å…¥ã‚Œã‚‹ã‹ã€ã‚’åˆ¤æ–­
> - **æš—å·åŒ–ï¼ˆEncryptionï¼‰**ï¼šé‡è¦æ›¸é¡ã‚’é‡‘åº«ã«ä¿ç®¡
> - **ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆRate Limitingï¼‰**ï¼šã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã®å®šå“¡åˆ¶é™
>
> **æœ¬ã‚·ã‚¹ãƒ†ãƒ ã§ã®å®Ÿè£…ï¼š**
>
> - Clerkã§Google/Discordãƒ­ã‚°ã‚¤ãƒ³ï¼ˆèªè¨¼ï¼‰
> - å½¹å‰²ãƒ™ãƒ¼ã‚¹ã§æ©Ÿèƒ½åˆ¶é™ï¼ˆèªå¯ï¼‰
> - APIã‚­ãƒ¼ã‚„å€‹äººæƒ…å ±ã‚’æš—å·åŒ–
> - 1åˆ†ã«60å›ã¾ã§ã®APIå‘¼ã³å‡ºã—åˆ¶é™

### 6.1 èªè¨¼ãƒ»èªå¯

```python
# Clerkçµ±åˆã«ã‚ˆã‚‹èªè¨¼
class AuthenticationMiddleware:
    - verify_jwt_token()
    - extract_user_context()
    - validate_permissions()

# RBACï¼ˆRole-Based Access Controlï¼‰
Roles:
    - Admin: Full system access
    - Developer: Prompt CRUD, evaluation
    - Viewer: Read-only access
    - Collaborator: Limited write access

# Row-Level Security
class PromptAuthorization:
    - can_read(user: User, prompt: Prompt) -> bool
    - can_write(user: User, prompt: Prompt) -> bool
    - can_delete(user: User, prompt: Prompt) -> bool
```

### 6.2 ãƒ‡ãƒ¼ã‚¿ä¿è­·

```python
# æš—å·åŒ–æˆ¦ç•¥
class DataProtection:
    - encrypt_sensitive_data()  # API keys, credentials
    - hash_pii_data()           # Personal information
    - secure_prompt_content()    # Proprietary prompts

# API ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
class APISecurityLayer:
    - rate_limiting()           # 60 req/min per user
    - input_validation()        # Pydantic strict mode
    - output_sanitization()     # XSS prevention
    - api_key_management()      # Secure key rotation
```

## 7. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£è¨­è¨ˆ

ğŸ’¡ **åˆå¿ƒè€…å‘ã‘èª¬æ˜ï¼šã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨ã¯ï¼Ÿ**

> ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¢—ãˆã¦ã‚‚ã‚·ã‚¹ãƒ†ãƒ ãŒè½ã¡ãªã„ã‚ˆã†ã«ã€ã€Œæ‹¡å¼µã§ãã‚‹ã€è¨­è¨ˆã‚’ã™ã‚‹ã“ã¨ã§ã™ã€‚
>
> **ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®ä¾‹ï¼š**
>
> - **å°‘äººæ•°æ™‚**ï¼šã‚·ã‚§ãƒ•1äººã§å¯¾å¿œ
> - **æ··é›‘æ™‚**ï¼šã‚·ã‚§ãƒ•ã‚’å¢—ã‚„ã™ï¼ˆæ°´å¹³ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰
> - **å¤§è¦æ¨¡åº—**ï¼šå¤§ããªã‚­ãƒƒãƒãƒ³ï¼ˆå‚ç›´ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰
>
> **æœ¬ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¹ã‚±ãƒ¼ãƒ«æˆ¦ç•¥ï¼š**
>
> - **åˆæœŸï¼ˆ1-100ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰**ï¼šã‚µãƒ¼ãƒãƒ¼1å°ã§å¯¾å¿œ
> - **æˆé•·æœŸï¼ˆ100-10,000ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰**ï¼šWorkerã‚’å¢—ã‚„ã—ã¦å¯¾å¿œ
> - **å¤§è¦æ¨¡ï¼ˆ10,000+ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰**ï¼šãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–
>
> **å…·ä½“çš„ãªå¯¾ç­–ï¼š**
>
> - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚’ä¸¦åˆ—åŒ–ï¼ˆ10-100 Workerã§åŒæ™‚å®Ÿè¡Œï¼‰
> - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§é«˜é€ŸåŒ–ï¼ˆRedisã§é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼‰
> - CDNã§é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡ï¼ˆCloudflareã§ä¸–ç•Œä¸­ã«åˆ†æ•£ï¼‰

### 7.1 æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°æˆ¦ç•¥

```yaml
# ä¸¦åˆ—å‡¦ç†å¯¾å¿œ
ParallelExecution:
  TestExecution:
    - Worker pool: 10-100 workers
    - Queue: Redis Streams
    - Timeout: 30s per test

  EvaluationPipeline:
    - Batch size: 10-50 prompts
    - Concurrent LLM calls: 5-20
    - Result aggregation: Async

# ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æˆ¦ç•¥
CachingLayers:
  L1_Cache:
    - Location: Application memory
    - TTL: 5 minutes
    - Size: 100MB

  L2_Cache:
    - Location: Redis
    - TTL: 1 hour
    - Size: 1GB

  L3_Cache:
    - Location: CDN (Cloudflare)
    - TTL: 24 hours
    - Size: Unlimited
```

### 7.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–

```sql
-- Turso (libSQL) æœ€é©åŒ–
-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥
CREATE INDEX idx_prompts_user_status ON prompts(user_id, status);
CREATE INDEX idx_evaluations_prompt_date ON evaluations(prompt_id, executed_at);
CREATE INDEX idx_test_results_evaluation ON test_results(evaluation_id);

-- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°
-- æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®æœˆæ¬¡ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³
CREATE TABLE evaluations_2025_01 PARTITION OF evaluations
    FOR VALUES FROM ('2025-01-01') TO ('2025-02-01');
```

## 8. çµ±åˆãƒã‚¤ãƒ³ãƒˆ

### 8.1 å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ

```python
# LLM ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼çµ±åˆï¼ˆ100+å¯¾å¿œï¼‰
class LLMIntegrationLayer:
    providers = {
        "openai": OpenAIAdapter,
        "anthropic": AnthropicAdapter,
        "google": GoogleAIAdapter,
        "mistral": MistralAdapter,
        # ... 100+ providers via LiteLLM
    }

# è¦³æ¸¬æ€§çµ±åˆ
class ObservabilityIntegration:
    - langfuse: LLMãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°
    - prometheus: ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
    - grafana: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
    - sentry: ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
```

### 8.2 å°†æ¥ã®æ‹¡å¼µæ€§

```python
# ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«å¯¾å¿œæº–å‚™
class MultiModalSupport:
    """å°†æ¥ã®ç”»åƒãƒ»å‹•ç”»ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¯¾å¿œ"""
    - ImagePromptHandler
    - VideoPromptHandler
    - AudioPromptHandler
    - CrossModalEvaluation

# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
class PluginSystem:
    """ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£æ‹¡å¼µå¯¾å¿œ"""
    - CustomEvaluators
    - CustomOptimizers
    - CustomReporters
    - WebhookIntegrations
```

## 9. éæ©Ÿèƒ½è¦ä»¶ï¼ˆNFRï¼‰å¯¾å¿œ

### 9.1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹           | ç›®æ¨™å€¤        | æ¸¬å®šæ–¹æ³•             |
| -------------------- | ------------- | -------------------- |
| API ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“   | P95 < 200ms   | Prometheus + Grafana |
| ä¸¦åˆ—ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ       | 100 tests/sec | Custom metrics       |
| WebSocket ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· | < 50ms        | Real User Monitoring |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª   | P99 < 100ms   | Turso analytics      |

### 9.2 å¯ç”¨æ€§è¦ä»¶

```yaml
SLA Targets:
  Availability: 99.9% (43.2 min/month)
  RTO: 1 hour
  RPO: 5 minutes

Resilience Patterns:
  - Circuit Breaker: LLM calls
  - Retry with Backoff: API requests
  - Fallback: Cache on failure
  - Bulkhead: Resource isolation
```

### 9.3 ä¿å®ˆæ€§è¦ä»¶

```python
# ãƒ­ã‚°æˆ¦ç•¥
class StructuredLogging:
    - Correlation ID tracking
    - Request/Response logging
    - Error context capture
    - Performance metrics

# ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
class Monitoring:
    - Health checks: /health, /ready
    - Metrics endpoint: /metrics
    - Distributed tracing: OpenTelemetry
    - Alert rules: Prometheus
```

## 10. æŠ€è¡“çš„æ±ºå®šè¨˜éŒ²ï¼ˆADRï¼‰

### ADR-001: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ¡ç”¨

**Status**: Accepted **Context**: éåŒæœŸå‡¦ç†ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã€ç–çµåˆãŒå¿…è¦
**Decision**: Redis Streamsãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹ã‚’æ¡ç”¨ **Consequences**:

- âœ… é«˜ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆé”æˆ
- âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ç–çµåˆ
- âš ï¸ çµæœæ•´åˆæ€§ã®ç®¡ç†ãŒå¿…è¦

### ADR-002: CQRS ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…

**Status**: Accepted **Context**: èª­ã¿æ›¸ãã®è² è·ç‰¹æ€§ãŒå¤§ããç•°ãªã‚‹
**Decision**: ã‚³ãƒãƒ³ãƒ‰ã¨ã‚¯ã‚¨ãƒªã‚’å®Œå…¨åˆ†é›¢ **Consequences**:

- âœ… èª­ã¿å–ã‚Šæ€§èƒ½ã®æœ€é©åŒ–
- âœ… ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Š
- âš ï¸ ãƒ‡ãƒ¼ã‚¿åŒæœŸã®è¤‡é›‘æ€§

### ADR-003: ãƒãƒ«ãƒLLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ

**Status**: Accepted **Context**: ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ­ãƒƒã‚¯ã‚¤ãƒ³å›é¿ã¨ã‚³ã‚¹ãƒˆæœ€é©åŒ–
**Decision**: LiteLLMã«ã‚ˆã‚‹çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ **Consequences**:

- âœ… 100+ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ
- âœ… ç°¡å˜ãªåˆ‡ã‚Šæ›¿ãˆ
- âš ï¸ æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰

## 11. å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆSprint 1-2ï¼‰

- [ ] ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«å®Ÿè£…
- [ ] åŸºæœ¬çš„ãªCRUD API
- [ ] Turso ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
- [ ] èªè¨¼ãƒ»èªå¯åŸºç›¤

### Phase 2: ã‚³ã‚¢æ©Ÿèƒ½ï¼ˆSprint 3-4ï¼‰

- [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆãƒ»ç·¨é›†
- [ ] LLMçµ±åˆï¼ˆOpenAI, Anthropicï¼‰
- [ ] åŸºæœ¬çš„ãªè©•ä¾¡æ©Ÿèƒ½
- [ ] ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

### Phase 3: é«˜åº¦ãªæ©Ÿèƒ½ï¼ˆSprint 5-6ï¼‰

- [ ] CQRSå®Ÿè£…
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‡¦ç†
- [ ] ä¸¦åˆ—ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- [ ] é«˜åº¦ãªè©•ä¾¡ãƒ¡ãƒˆãƒªã‚¯ã‚¹

### Phase 4: æœ€é©åŒ–ï¼ˆSprint 7-8ï¼‰

- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æˆ¦ç•¥å®Ÿè£…
- [ ] ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
- [ ] ç›£è¦–ãƒ»è¦³æ¸¬æ€§å¼·åŒ–

## 12. ã¾ã¨ã‚

æœ¬ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã¯ã€AutoForgeNexusã®è¦ä»¶ã‚’æº€ãŸã™å …ç‰¢ã§ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿç¾ã—ã¾ã™ï¼š

âœ… **DDDåŸå‰‡**ã«ã‚ˆã‚‹æ˜ç¢ºãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢âœ…
**ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ã«ã‚ˆã‚‹ä¿å®ˆæ€§ã®ç¢ºä¿âœ…
**ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•**ã«ã‚ˆã‚‹é«˜ã„æ‹¡å¼µæ€§ã¨ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£âœ…
**CQRS**ã«ã‚ˆã‚‹èª­ã¿æ›¸ãã®æœ€é©åŒ–âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**ã®è¨­è¨ˆâœ…
**å°†æ¥ã®æ‹¡å¼µ**ã‚’è€ƒæ…®ã—ãŸæŸ”è»Ÿãªæ§‹é€ 

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦ã€ã“ã®è¨­è¨ˆã«åŸºã¥ã„ãŸè©³ç´°ãªå®Ÿè£…è¨ˆç”»ã¨ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã®ç­–å®šã‚’æ¨å¥¨ã—ã¾ã™ã€‚

---

## ğŸ“– åˆå¿ƒè€…å‘ã‘ç”¨èªé›†

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é–¢é€£

| ç”¨èª               | èª­ã¿æ–¹               | ç°¡å˜ãªèª¬æ˜                                                                     | ä¾‹                                                           |
| ------------------ | -------------------- | ------------------------------------------------------------------------------ | ------------------------------------------------------------ |
| **DDD**            | ãƒ‡ã‚£ãƒ¼ãƒ‡ã‚£ãƒ¼ãƒ‡ã‚£ãƒ¼   | Domain-Driven Designã®ç•¥ã€‚ãƒ“ã‚¸ãƒã‚¹ã®ã€Œå°‚é–€çŸ¥è­˜ã€ã‚’ä¸­å¿ƒã«ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆã™ã‚‹æ‰‹æ³• | ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã‚„ã€Œè©•ä¾¡ã€ã¨ã„ã†æ¥­å‹™ç”¨èªã‚’ãã®ã¾ã¾ã‚³ãƒ¼ãƒ‰ã«ä½¿ã† |
| **ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**   | -                    | IDã‚’æŒã¡ã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãŒã‚ã‚‹ãƒ‡ãƒ¼ã‚¿                                           | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€è©•ä¾¡                                   |
| **å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ** | -                    | IDã‚’æŒãŸãªã„ã€å€¤ãã®ã‚‚ã®ã‚’è¡¨ç¾ã™ã‚‹ãƒ‡ãƒ¼ã‚¿                                       | é‡‘é¡ã€1000å††ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹                                 |
| **ãƒ¬ã‚¤ãƒ¤ãƒ¼**       | -                    | ã‚·ã‚¹ãƒ†ãƒ ã‚’éšå±¤ã«åˆ†ã‘ãŸã‚‚ã®                                                     | ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã€ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ãªã©                         |
| **CQRS**           | ã‚·ãƒ¼ã‚­ãƒ¥ãƒ¼ã‚¢ãƒ¼ãƒ«ã‚¨ã‚¹ | æ›¸ãè¾¼ã¿ã¨èª­ã¿å–ã‚Šã‚’åˆ¥ã®ä»•çµ„ã¿ã§å‡¦ç†ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³                               | ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã¯Tursoã€è¡¨ç¤ºã¯Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰                 |
| **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•**   | -                    | ã€Œå‡ºæ¥äº‹ã€ã‚’ä¸­å¿ƒã«ã‚·ã‚¹ãƒ†ãƒ ã‚’å‹•ã‹ã™è¨­è¨ˆ                                         | ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒä½œæˆã•ã‚ŒãŸã€â†’ã€Œè©•ä¾¡ã‚’é–‹å§‹ã€                    |
| **ãƒªãƒã‚¸ãƒˆãƒª**     | -                    | ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»å–å¾—ã‚’æ‹…å½“ã™ã‚‹ã‚¯ãƒ©ã‚¹                                             | PromptRepositoryã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä¿å­˜                           |
| **ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹**   | -                    | ã‚·ã‚¹ãƒ†ãƒ ãŒã§ãã‚‹ã“ã¨ï¼ˆæ©Ÿèƒ½ï¼‰ã‚’è¡¨ç¾                                             | CreatePromptUseCaseï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆæ©Ÿèƒ½ï¼‰                    |

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ç”¨èª          | èª­ã¿æ–¹               | ä½•ã‚’ã™ã‚‹ã‚‚ã®ï¼Ÿ                  | ãªãœä½¿ã†ï¼Ÿ                           |
| ------------- | -------------------- | ------------------------------- | ------------------------------------ |
| **FastAPI**   | ãƒ•ã‚¡ã‚¹ãƒˆã‚¨ãƒ¼ãƒ”ãƒ¼ã‚¢ã‚¤ | Pythonã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯       | é«˜é€Ÿã§ã€å‹ãƒã‚§ãƒƒã‚¯ãŒã—ã£ã‹ã‚Šã§ãã‚‹   |
| **Turso**     | ã‚¿ãƒ¼ã‚½               | SQLiteãƒ™ãƒ¼ã‚¹ã®åˆ†æ•£DB            | é«˜é€Ÿã§ã€ä¸–ç•Œä¸­ã«ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æ•£ã§ãã‚‹   |
| **Redis**     | ãƒ¬ãƒ‡ã‚£ã‚¹             | ãƒ¡ãƒ¢ãƒªä¸Šã®é«˜é€Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹      | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚„ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹ã«ä½¿ã†       |
| **LiteLLM**   | ãƒ©ã‚¤ãƒˆã‚¨ãƒ«ã‚¨ãƒ«ã‚¨ãƒ    | 100+ã®LLMã‚’çµ±ä¸€çš„ã«ä½¿ãˆã‚‹ãƒ„ãƒ¼ãƒ« | OpenAIã‚‚Claudeã‚‚åŒã˜æ–¹æ³•ã§ä½¿ãˆã‚‹     |
| **Clerk**     | ã‚¯ãƒ©ãƒ¼ã‚¯             | èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹                    | Google/GitHubãƒ­ã‚°ã‚¤ãƒ³ã‚’ç°¡å˜ã«å®Ÿè£…    |
| **Pydantic**  | ãƒ‘ã‚¤ãƒ€ãƒ³ãƒ†ã‚£ãƒƒã‚¯     | ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª            | å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•ã§ãƒã‚§ãƒƒã‚¯           |
| **WebSocket** | ã‚¦ã‚§ãƒ–ã‚½ã‚±ãƒƒãƒˆ       | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡æŠ€è¡“            | ãƒãƒ£ãƒƒãƒˆã®ã‚ˆã†ã«å³åº§ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€å—ä¿¡ |

### ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»åŸå‰‡

| ç”¨èª                 | æ„å‘³                             | ãƒ¡ãƒªãƒƒãƒˆ                     |
| -------------------- | -------------------------------- | ---------------------------- |
| **ä¾å­˜æ€§é€†è»¢**       | ä¸Šã®å±¤ãŒä¸‹ã®å±¤ã«ä¾å­˜ã—ãªã„       | ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ã€å¤‰æ›´ã—ã‚„ã™ã„ |
| **ç–çµåˆ**           | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãŠäº’ã„ã‚’çŸ¥ã‚‰ãªã„ | ç‹¬ç«‹ã—ã¦é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆã§ãã‚‹   |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¢—ãˆã¦ã‚‚å¯¾å¿œã§ãã‚‹     | ã‚·ã‚¹ãƒ†ãƒ ãŒè½ã¡ãªã„           |
| **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**       | APIå‘¼ã³å‡ºã—å›æ•°ã‚’åˆ¶é™            | ã‚µãƒ¼ãƒãƒ¼ã‚’å®ˆã‚‹ã€æ”»æ’ƒã‚’é˜²ã   |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**       | ã‚ˆãä½¿ã†ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ™‚ä¿å­˜         | é«˜é€ŸåŒ–ã€DBè² è·è»½æ¸›           |
| **éåŒæœŸå‡¦ç†**       | å¾…ãŸãšã«æ¬¡ã®å‡¦ç†ã«é€²ã‚€           | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š             |
| **ä¸¦åˆ—å‡¦ç†**         | è¤‡æ•°ã®å‡¦ç†ã‚’åŒæ™‚å®Ÿè¡Œ             | å‡¦ç†æ™‚é–“çŸ­ç¸®                 |
