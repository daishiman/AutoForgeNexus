# GitHub Actions CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆ

**ãƒ¬ãƒ“ãƒ¥ãƒ¼æ—¥**: 2025å¹´10æœˆ6æ—¥ **ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
**å¯¾è±¡ã‚³ãƒŸãƒƒãƒˆ**: `e770dfc` (2025å¹´10æœˆ6æ—¥) **ã‚¹ã‚³ãƒ¼ãƒ—**:
`.github/workflows/shared-setup-python.yml`, `.github/workflows/backend-ci.yml`

---

## ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

GitHub Actions
CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ãŠã‘ã‚‹ã€Œã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆé…å¸ƒã‹ã‚‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã¿ã¸ã®ç§»è¡Œã€ä¿®æ­£ã«ã¤ã„ã¦ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦³ç‚¹ã‹ã‚‰åŒ…æ‹¬çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿæ–½ã—ã¾ã—ãŸã€‚

**ç·åˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢**: 82/100 (**æ‰¿èªæ¨å¥¨**) **Criticalè„†å¼±æ€§**: 0ä»¶
**Highè„†å¼±æ€§**: 0ä»¶ **Mediumè„†å¼±æ€§**: 2ä»¶ **Lowè„†å¼±æ€§**: 1ä»¶

**æ‰¿èªåˆ¤æ–­**: âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ‰¿èª**ï¼ˆæ¡ä»¶ä»˜ãï¼‰

ä»Šå›ã®ä¿®æ­£ã¯å…¨ä½“ã¨ã—ã¦ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Šã«å¯„ä¸ã—ã¦ã„ã¾ã™ãŒã€Mediumå„ªå…ˆåº¦ã®2ä»¶ã®æ”¹å–„æ¨å¥¨äº‹é …ãŒã‚ã‚Šã¾ã™ã€‚

---

## 1. å¤‰æ›´å†…å®¹ã®åˆ†æ

### 1.1 ä¸»è¦ãªå¤‰æ›´ç‚¹

| å¤‰æ›´é …ç›®                     | å¤‰æ›´å‰                             | å¤‰æ›´å¾Œ                           | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å½±éŸ¿ |
| ---------------------------- | ---------------------------------- | -------------------------------- | ---------------- |
| **ä¾å­˜é–¢ä¿‚é…å¸ƒæ–¹æ³•**         | `actions/upload-artifact` (tar.gz) | GitHub Actions Cache             | âœ… éœ²å‡ºå‰Šæ¸›      |
| **venvæ¤œè¨¼**                 | ãªã—                               | æ˜ç¤ºçš„ãªæ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—è¿½åŠ          | âœ… æ•´åˆæ€§å‘ä¸Š    |
| **setup-environmentä¾å­˜**    | å‰Šé™¤ã•ã‚Œã¦ã„ãŸï¼ˆç‹¬ç«‹å®Ÿè¡Œï¼‰         | å¾©æ´»ï¼ˆneeds: setup-environmentï¼‰ | âœ… ä¸€è²«æ€§å‘ä¸Š    |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³** | `-v2`ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹                  | ãƒãƒ¼ã‚¸ãƒ§ãƒ³å‰Šé™¤ï¼ˆãƒãƒƒã‚·ãƒ¥ã®ã¿ï¼‰   | âš ï¸ å½±éŸ¿ä¸­ç«‹      |

### 1.2 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¤‰æ›´

```
ã€å¤‰æ›´å‰ã€‘
setup-environment job
  â”œâ”€ venvä½œæˆ
  â””â”€ actions/upload-artifact (tar.gz, retention-days: 1)
       â†“
quality-checks/test-suite/build-artifacts jobs
  â”œâ”€ actions/download-artifact
  â”œâ”€ tar -xzfå±•é–‹
  â””â”€ venvä½¿ç”¨

ã€å¤‰æ›´å¾Œã€‘
setup-environment job
  â”œâ”€ venvä½œæˆ
  â””â”€ actions/cacheä¿å­˜ (key: python-version-os-deps-hash)
       â†“
quality-checks/test-suite/build-artifacts jobs
  â”œâ”€ actions/cacheå¾©å…ƒ (åŒä¸€ã‚­ãƒ¼)
  â”œâ”€ venvæ¤œè¨¼ï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå­˜åœ¨ã€activateå­˜åœ¨ï¼‰
  â””â”€ venvä½¿ç”¨
```

---

## 2. è„†å¼±æ€§è©•ä¾¡ï¼ˆOWASP & CWEæº–æ‹ ï¼‰

### 2.1 Criticalè„†å¼±æ€§ï¼ˆCVSS 9.0-10.0ï¼‰

**ç™ºè¦‹: ãªã—** âœ…

---

### 2.2 Highè„†å¼±æ€§ï¼ˆCVSS 7.0-8.9ï¼‰

**ç™ºè¦‹: ãªã—** âœ…

---

### 2.3 Mediumè„†å¼±æ€§ï¼ˆCVSS 4.0-6.9ï¼‰

#### ğŸŸ¡ **MED-2025-001: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚¤ã‚ºãƒ‹ãƒ³ã‚°æ”»æ’ƒã®ç†è«–çš„å¯èƒ½æ€§**

**CVSS 3.1ã‚¹ã‚³ã‚¢**: 5.3 (Medium) **ãƒ™ã‚¯ãƒˆãƒ«**:
`CVSS:3.1/AV:N/AC:H/PR:L/UI:N/S:U/C:N/I:H/A:N`

**è„†å¼±æ€§è©³ç´°**:

- **CWE-345**: Insufficient Verification of Data Authenticity
- **å•é¡Œ**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥å†…å®¹ã®æš—å·å­¦çš„æ¤œè¨¼ï¼ˆãƒã‚§ãƒƒã‚¯ã‚µãƒ ã€ç½²åï¼‰ãŒå®Ÿè£…ã•ã‚Œã¦ã„ãªã„
- **æ”»æ’ƒã‚·ãƒŠãƒªã‚ª**:
  1. æ”»æ’ƒè€…ãŒGitHub Actionsã¸ã®æ›¸ãè¾¼ã¿æ¨©é™ã‚’å–å¾—ï¼ˆPRçµŒç”±ï¼‰
  2. æ‚ªæ„ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å«ã‚€ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  3. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«æ‚ªæ„ã®ã‚ã‚‹venvã‚’ä¿å­˜
  4. å¾Œç¶šã®ã‚¸ãƒ§ãƒ–ãŒæ±šæŸ“ã•ã‚ŒãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨

**ç¾åœ¨ã®ç·©å’Œç­–**:

- GitHub
  Actionsã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯**ãƒ–ãƒ©ãƒ³ãƒã‚¹ã‚³ãƒ¼ãƒ—åˆ†é›¢**ã•ã‚Œã¦ã„ã‚‹ï¼ˆmain/developã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯åˆ†é›¢ï¼‰
- PRã‹ã‚‰ã¯main/developã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’**èª­ã¿å–ã‚Šå°‚ç”¨**ã§ä½¿ç”¨å¯èƒ½
- `hashFiles('backend/pyproject.toml', 'backend/requirements*.txt')`ã«ã‚ˆã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ç”Ÿæˆ

**ãƒªã‚¹ã‚¯è©•ä¾¡**:

- **å¯èƒ½æ€§**: Lowï¼ˆGitHub Actionsã®ãƒ–ãƒ©ãƒ³ãƒä¿è­·ã¨ã‚­ãƒ¼ãƒãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹ç·©å’Œï¼‰
- **å½±éŸ¿**: Highï¼ˆCI/CDå…¨ä½“ã®æ±šæŸ“ã€ä¾›çµ¦ãƒã‚§ãƒ¼ãƒ³æ”»æ’ƒï¼‰
- **ç·åˆ**: Medium

**æ¨å¥¨ç·©å’Œç­–**:

```yaml
# å„ªå…ˆåº¦: Medium | å®Ÿè£…å·¥æ•°: 1-2æ™‚é–“

- name: ğŸ“¥ Restore cached dependencies
  id: cache-deps
  uses: actions/cache@v4.3.0
  with:
    path: |
      ~/.cache/pip
      ./backend/venv
    key:
      python-${{ env.PYTHON_VERSION }}-${{ runner.os }}-${{
      hashFiles('backend/pyproject.toml', 'backend/requirements*.txt') }}
    restore-keys: |
      python-${{ env.PYTHON_VERSION }}-${{ runner.os }}-

# è¿½åŠ : ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ•´åˆæ€§æ¤œè¨¼
- name: ğŸ” Verify cache integrity
  if: steps.cache-deps.outputs.cache-hit == 'true'
  working-directory: ./backend
  run: |
    # venvå†…ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã‚’ãƒãƒƒã‚·ãƒ¥åŒ–
    source venv/bin/activate
    pip list --format=freeze | sort > /tmp/installed_packages.txt
    INSTALLED_HASH=$(sha256sum /tmp/installed_packages.txt | cut -d' ' -f1)

    # pyproject.tomlã‹ã‚‰æœŸå¾…ã•ã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ
    python << 'EOF'
    import tomli
    with open('pyproject.toml', 'rb') as f:
        data = tomli.load(f)
    deps = data['project']['dependencies'] + data['project']['optional-dependencies']['dev']
    for dep in sorted(deps):
        print(dep.split('==')[0])  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã‚’é™¤å¤–ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã®ã¿
    EOF

    echo "âœ… Cache integrity verification passed"
    echo "Installed packages hash: ${INSTALLED_HASH}"
```

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ“‹ **æ”¹å–„æ¨å¥¨**ï¼ˆCriticalç’°å¢ƒã§ã¯å®Ÿè£…å¿…é ˆï¼‰

---

#### ğŸŸ¡ **MED-2025-002: ä¾å­˜é–¢ä¿‚ã®å‹•çš„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³æ”»æ’ƒãƒªã‚¹ã‚¯**

**CVSS 3.1ã‚¹ã‚³ã‚¢**: 4.8 (Medium) **ãƒ™ã‚¯ãƒˆãƒ«**:
`CVSS:3.1/AV:N/AC:H/PR:L/UI:R/S:U/C:L/I:L/A:L`

**è„†å¼±æ€§è©³ç´°**:

- **CWE-494**: Download of Code Without Integrity Check
- **å•é¡Œ**: `quality-checks`ã‚¸ãƒ§ãƒ–ã§å®Ÿè¡Œæ™‚ã«ãƒ„ãƒ¼ãƒ«å›ºæœ‰ä¾å­˜é–¢ä¿‚ã‚’å‹•çš„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  ```yaml
  case "${{ matrix.check-type }}" in
    format)
      pip install black==24.10.0  # â† å®Ÿè¡Œæ™‚ã«å‹•çš„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
      ;;
    type-check)
      pip install mypy types-requests types-pydantic
      ;;
    security)
      pip install bandit[toml] safety
      ;;
  esac
  ```

**æ”»æ’ƒã‚·ãƒŠãƒªã‚ª**:

1. PyPIãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªãƒã‚¸ãƒˆãƒªã¸ã®MITMæ”»æ’ƒï¼ˆDNS spoofingã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¾µå®³ï¼‰
2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚¿ã‚¤ãƒã‚¹ã‚¯ãƒ¯ãƒƒãƒ†ã‚£ãƒ³ã‚°ï¼ˆtyposquattingï¼‰
3. æ­£è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾µå®³ï¼ˆsupply chain attackï¼‰

**ç¾åœ¨ã®ç·©å’Œç­–**:

- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ”ãƒ³ï¼ˆ`black==24.10.0`ï¼‰ã«ã‚ˆã‚‹ç‰¹å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š
- GitHub Actionsã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†é›¢

**ãƒªã‚¹ã‚¯è©•ä¾¡**:

- **å¯èƒ½æ€§**: Low-Mediumï¼ˆPyPIã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Šã€HTTPSé€šä¿¡ï¼‰
- **å½±éŸ¿**: Mediumï¼ˆCI/CDç’°å¢ƒã®æ±šæŸ“ã€ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ã®ãƒã‚¤ãƒ‘ã‚¹ï¼‰
- **ç·åˆ**: Medium

**æ¨å¥¨ç·©å’Œç­–**:

```yaml
# å„ªå…ˆåº¦: Medium | å®Ÿè£…å·¥æ•°: 2-3æ™‚é–“

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: pyproject.tomlã¸ã®çµ±åˆï¼ˆæ¨å¥¨ï¼‰
[project.optional-dependencies]
dev = [
    "pytest==8.3.3",
    "black==24.10.0",  # â† ã™ã§ã«å­˜åœ¨ã€æ ¼ä¸Šã’ã—ã¦ä½¿ç”¨
    "mypy==1.13.0",
    "ruff==0.7.4",
    "bandit[toml]>=1.7.9",  # è¿½åŠ 
    "safety>=3.2.0",        # è¿½åŠ 
    # ... æ—¢å­˜ã®ä¾å­˜é–¢ä¿‚
]

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: pip-toolsã«ã‚ˆã‚‹ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼
- name: ğŸ¯ Run ${{ matrix.name }}
  working-directory: ./backend
  run: |
    source venv/bin/activate

    # pip-compileã§ç”Ÿæˆã•ã‚ŒãŸrequirements.lockã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    pip install --require-hashes -r requirements.lock

    ${{ matrix.command }}

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: pipã®ãƒãƒƒã‚·ãƒ¥ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–
- name: ğŸ¯ Run ${{ matrix.name }}
  env:
    PIP_REQUIRE_HASHES: "true"  # ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼ã‚’å¼·åˆ¶
  run: |
    source venv/bin/activate
    pip install --require-hashes -r requirements-hashed.txt
```

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ“‹ **æ”¹å–„æ¨å¥¨**ï¼ˆæœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å®Ÿè£…å¿…é ˆï¼‰

---

### 2.4 Lowè„†å¼±æ€§ï¼ˆCVSS 0.1-3.9ï¼‰

#### ğŸŸ¢ **LOW-2025-001: venvæ¤œè¨¼ã®ä¸å®Œå…¨æ€§**

**CVSS 3.1ã‚¹ã‚³ã‚¢**: 2.3 (Low) **ãƒ™ã‚¯ãƒˆãƒ«**:
`CVSS:3.1/AV:L/AC:H/PR:L/UI:N/S:U/C:N/I:L/A:N`

**è„†å¼±æ€§è©³ç´°**:

- **CWE-754**: Improper Check for Unusual or Exceptional Conditions
- **å•é¡Œ**:
  venvæ¤œè¨¼ãŒ**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå­˜åœ¨**ã¨**activateå­˜åœ¨**ã®ã¿ã§ã€**Pythonå®Ÿè¡Œå¯èƒ½æ€§**ã‚„**ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ•´åˆæ€§**ã‚’æ¤œè¨¼ã—ã¦ã„ãªã„
  ```yaml
  - name: âœ… Verify venv restoration
    run: |
      if [ ! -d venv ]; then
        echo "âŒ ERROR: venv directory not found"
        exit 1
      fi
      if [ ! -f venv/bin/activate ]; then
        echo "âŒ ERROR: venv/bin/activate not found"
        exit 1
      fi
      echo "âœ… venv verified"
  ```

**æ”»æ’ƒã‚·ãƒŠãƒªã‚ª**:

1. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç ´æã«ã‚ˆã‚‹venvã®éƒ¨åˆ†çš„æå‚·
2. `venv/bin/python`ãŒå®Ÿè¡Œä¸å¯èƒ½ãªçŠ¶æ…‹ã§ã‚‚æ¤œè¨¼ã‚’é€šé
3. å¾Œç¶šã®ã‚¹ãƒ†ãƒƒãƒ—ã§äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼

**ãƒªã‚¹ã‚¯è©•ä¾¡**:

- **å¯èƒ½æ€§**: Lowï¼ˆGitHub Actionsã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ä¿¡é ¼æ€§ã¯é«˜ã„ï¼‰
- **å½±éŸ¿**: Lowï¼ˆãƒ“ãƒ«ãƒ‰å¤±æ•—ã®ã¿ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¾µå®³ã§ã¯ãªã„ï¼‰
- **ç·åˆ**: Low

**æ¨å¥¨ç·©å’Œç­–**:

```yaml
# å„ªå…ˆåº¦: Low | å®Ÿè£…å·¥æ•°: 30åˆ†

- name: âœ… Verify venv restoration
  working-directory: ./backend
  run: |
    if [ ! -d venv ]; then
      echo "âŒ ERROR: venv directory not found"
      exit 1
    fi
    if [ ! -f venv/bin/activate ]; then
      echo "âŒ ERROR: venv/bin/activate not found"
      exit 1
    fi

    # è¿½åŠ : Pythonå®Ÿè¡Œå¯èƒ½æ€§æ¤œè¨¼
    if [ ! -x venv/bin/python ]; then
      echo "âŒ ERROR: venv/bin/python is not executable"
      exit 1
    fi

    # è¿½åŠ : åŸºæœ¬çš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ¤œè¨¼
    source venv/bin/activate
    python -c "import sys; print(f'Python: {sys.version}')" || {
      echo "âŒ ERROR: Python execution failed"
      exit 1
    }

    pip --version || {
      echo "âŒ ERROR: pip not available"
      exit 1
    }

    echo "âœ… venv verified: $(ls -lh venv/bin/activate)"
    echo "âœ… Python executable: $(python --version)"
    echo "âœ… Pip version: $(pip --version)"
```

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ“‹ **æ”¹å–„æ¨å¥¨**ï¼ˆå„ªå…ˆåº¦ä½ï¼‰

---

## 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Šã®è©•ä¾¡

### 3.1 âœ… ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆå‰Šé™¤ã«ã‚ˆã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Š

**æ”¹å–„é …ç›®**: tar.gzã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®å‰Šé™¤

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŠ¹æœ**:

1. **éœ²å‡ºå‰Šæ¸›**: ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã¯**å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒªã§èª°ã§ã‚‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½**ã ã£ãŸ

   - å¤‰æ›´å‰: `actions/upload-artifact` â†’ 1æ—¥é–“ä¿æŒ â†’ ç¬¬ä¸‰è€…ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½
   - å¤‰æ›´å¾Œ: GitHub Actionsã‚­ãƒ£ãƒƒã‚·ãƒ¥ â†’ **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½**

2. **æƒ…å ±æ¼æ´©ãƒªã‚¹ã‚¯å‰Šæ¸›**: venvå†…ã®æ½œåœ¨çš„ãªç§˜å¯†æƒ…å ±éœ²å‡ºã‚’é˜²æ­¢

   - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ­ã‚°
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆpipè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç­‰ï¼‰
   - `.pyc`ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚æƒ…å ±

3. **æ”»æ’ƒå¯¾è±¡é ˜åŸŸç¸®å°**: ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ä»‹ã—ãŸé–“æ¥æ”»æ’ƒãƒ™ã‚¯ãƒˆãƒ«ã®æ’é™¤

**æ•°å€¤è©•ä¾¡**: +15ç‚¹ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢å‘ä¸Šï¼‰

---

### 3.2 âœ… venvæ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—ã®è¿½åŠ 

**æ”¹å–„é …ç›®**: `âœ… Verify venv restoration`ã‚¹ãƒ†ãƒƒãƒ—è¿½åŠ 

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŠ¹æœ**:

1. **Fail-FaståŸå‰‡**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç ´ææ™‚ã®æ—©æœŸæ¤œå‡º
2. **å¯è¦–æ€§å‘ä¸Š**: venvå¾©å…ƒçŠ¶æ…‹ã®æ˜ç¤ºçš„ãªç¢ºèª
3. **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§**: å•é¡Œç™ºç”Ÿæ™‚ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ”¯æ´

**æ•°å€¤è©•ä¾¡**: +8ç‚¹ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢å‘ä¸Šï¼‰

---

### 3.3 âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã®é©åˆ‡ãªè¨­è¨ˆ

**è©•ä¾¡é …ç›®**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯

```yaml
key:
  python-${{ env.PYTHON_VERSION }}-${{ runner.os }}-${{
  hashFiles('backend/pyproject.toml', 'backend/requirements*.txt') }}
restore-keys: |
  python-${{ env.PYTHON_VERSION }}-${{ runner.os }}-
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è©•ä¾¡**:

1. âœ… **ä¾å­˜é–¢ä¿‚ãƒãƒƒã‚·ãƒ¥**: `hashFiles()`ã«ã‚ˆã‚‹è‡ªå‹•ç„¡åŠ¹åŒ–
2. âœ… **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ†é›¢**: `runner.os`ã«ã‚ˆã‚‹ç’°å¢ƒåˆ†é›¢
3. âœ… **ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ†é›¢**: `PYTHON_VERSION`ã«ã‚ˆã‚‹Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ†é›¢
4. âš ï¸
   **restore-keys**: ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãƒãƒƒãƒãƒ³ã‚°ã«ã‚ˆã‚‹éƒ¨åˆ†çš„ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥å†åˆ©ç”¨ï¼ˆãƒªã‚¹ã‚¯ä½ï¼‰

**æ¨å¥¨**: ç¾çŠ¶ç¶­æŒï¼ˆé©åˆ‡ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ï¼‰

---

## 4. ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†

### 4.1 GITHUB_TOKENä½¿ç”¨çŠ¶æ³

**åˆ†æçµæœ**:

- `shared-setup-python.yml`: ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆä½¿ç”¨**ãªã—** âœ…
- `backend-ci.yml`: `codecov/codecov-action`ã®ã¿ã§`GITHUB_TOKEN`ã‚’ä½¿ç”¨

```yaml
# backend-ci.yml:203-207
- name: ğŸ“Š Upload coverage to Codecov
  uses: codecov/codecov-action@4fe8c5f003fae66aa5ebb77cfd3e7bfbbda0b6b0 # v3.1.5
  with:
    file: ./backend/coverage-${{ matrix.test-type }}.xml
    # â† GITHUB_TOKENã¯æš—é»™çš„ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ä½¿ç”¨ã•ã‚Œã‚‹
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è©•ä¾¡**:

- âœ… **æœ€å°æ¨©é™åŸå‰‡**: `codecov-action`ã¯èª­ã¿å–ã‚Šå°‚ç”¨ã‚¢ã‚¯ã‚»ã‚¹ã®ã¿å¿…è¦
- âœ… **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ”ãƒ³**: SHA-256ãƒãƒƒã‚·ãƒ¥ã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š
- âš ï¸ **æ¨©é™æ˜ç¤ºåŒ–ä¸è¶³**: `permissions:`ãƒ–ãƒ­ãƒƒã‚¯ãŒæœªå®šç¾©

**æ¨å¥¨ç·©å’Œç­–**:

```yaml
# å„ªå…ˆåº¦: Low | å®Ÿè£…å·¥æ•°: 15åˆ†

jobs:
  test-suite:
    name: ğŸ§ª Test Suite
    runs-on: ubuntu-latest
    needs: setup-environment

    # è¿½åŠ : æ˜ç¤ºçš„ãªæ¨©é™å®šç¾©
    permissions:
      contents: read # ãƒªãƒã‚¸ãƒˆãƒªèª­ã¿å–ã‚Š
      pull-requests: write # Codecovã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ï¼ˆå¿…è¦ãªå ´åˆï¼‰
      statuses: write # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯æ›´æ–°

    strategy:
      # ... æ—¢å­˜ã®è¨­å®š
```

---

### 4.2 ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆéœ²å‡ºã‚¹ã‚­ãƒ£ãƒ³

**ã‚¹ã‚­ãƒ£ãƒ³ç¯„å›²**: `.github/workflows/shared-setup-python.yml`, `backend-ci.yml`

**çµæœ**:

- âœ… ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ: **ãªã—**
- âœ… API KEYæ¼æ´©: **ãªã—**
- âœ… èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³éœ²å‡º: **ãªã—**

**æ¤œè¨¼æ–¹æ³•**:

```bash
# TruffleHogç›¸å½“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°
grep -rE '(password|secret|token|api[_-]?key)' .github/workflows/shared-setup-python.yml
grep -rE '(password|secret|token|api[_-]?key)' .github/workflows/backend-ci.yml

# çµæœ: ãƒãƒƒãƒãªã—ï¼ˆå¤‰æ•°å‚ç…§ã®ã¿ï¼‰
```

---

## 5. ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### 5.1 GitHub Actions ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ”ãƒ³è©•ä¾¡

**è©•ä¾¡å¯¾è±¡**: ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹Actionsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®šçŠ¶æ³

| Action                       | ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®š                                        | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è©•ä¾¡ |
| ---------------------------- | ----------------------------------------------------- | ---------------- |
| `actions/checkout`           | `@692973e3d937129bcbf40652eb9f2f61becf3332` (SHA-256) | âœ… **å„ªç§€**      |
| `actions/setup-python`       | `@0a5c61591373683505ea898e09a3ea4f39ef2b9c` (SHA-256) | âœ… **å„ªç§€**      |
| `actions/cache`              | `@0057852bfaa89a56745cba8c7296529d2fc39830` (SHA-256) | âœ… **å„ªç§€**      |
| `actions/upload-artifact`    | `@834a144ee995460fba8ed112a2fc961b36a5ec5a` (SHA-256) | âœ… **å„ªç§€**      |
| `codecov/codecov-action`     | `@4fe8c5f003fae66aa5ebb77cfd3e7bfbbda0b6b0` (SHA-256) | âœ… **å„ªç§€**      |
| `docker/setup-buildx-action` | `@988b5a0280414f521da01fcc63a27aeeb4b104db` (SHA-256) | âœ… **å„ªç§€**      |
| `docker/build-push-action`   | `@4f58ea79222b3b9dc2c8bbdd6debcef730109a75` (SHA-256) | âœ… **å„ªç§€**      |

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢**: 100/100 âœ…

**è©•ä¾¡**: ã™ã¹ã¦ã®ActionsãŒSHA-256ãƒãƒƒã‚·ãƒ¥ã§ãƒ”ãƒ³å›ºå®šã•ã‚Œã¦ãŠã‚Šã€**SLSA Level
3**ç›¸å½“ã®ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³ä¿è­·ã‚’å®Ÿç¾

---

### 5.2 ä¾å­˜é–¢ä¿‚ã®æ•´åˆæ€§æ¤œè¨¼

**è©•ä¾¡é …ç›®**: `pyproject.toml` vs `requirements.txt`

**ç¾çŠ¶**:

```toml
# backend/pyproject.toml - 49å€‹ã®ç›´æ¥ä¾å­˜é–¢ä¿‚
dependencies = [
    "fastapi==0.116.1",
    "sqlalchemy==2.0.32",
    # ...
]

[project.optional-dependencies]
dev = [
    "pytest==8.3.3",
    "ruff==0.7.4",
    # ...
]
```

```
# backend/requirements.txt - 7å€‹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿
cffi==1.17.1
cryptography==43.0.3
libsql-client==0.3.1
packaging==24.2
pycparser==2.22
wheel==0.44.0
```

**å•é¡Œç‚¹**:

- `requirements.txt`ã¯**éƒ¨åˆ†çš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªã‚¹ãƒˆ**ï¼ˆå…¨ä¾å­˜é–¢ä¿‚ã‚’å«ã¾ãªã„ï¼‰
- CI/CDã§ã¯`pyproject.toml`ã‚’å„ªå…ˆä½¿ç”¨ï¼ˆ`pip install -e .[dev]`ï¼‰
- **æ•´åˆæ€§ãƒªã‚¹ã‚¯**: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã¨CI/CDã§ç•°ãªã‚‹ä¾å­˜é–¢ä¿‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å¯èƒ½æ€§

**æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**:

```bash
# å„ªå…ˆåº¦: Medium | å®Ÿè£…å·¥æ•°: 1æ™‚é–“

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: requirements.txtå‰Šé™¤ï¼ˆpyproject.tomlã«çµ±ä¸€ï¼‰
git rm backend/requirements.txt

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: pip-toolsã§è‡ªå‹•ç”Ÿæˆ
cd backend
pip install pip-tools
pip-compile pyproject.toml --output-file=requirements.txt --generate-hashes
pip-compile pyproject.toml --extra=dev --output-file=requirements-dev.txt --generate-hashes

# çµæœ: ãƒãƒƒã‚·ãƒ¥ä»˜ããƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ
# --require-hashes ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«æ¤œè¨¼å¯èƒ½
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å½±éŸ¿**: Mediumï¼ˆä¾å­˜é–¢ä¿‚ã®ä¸æ•´åˆã«ã‚ˆã‚‹ãƒ“ãƒ«ãƒ‰å†ç¾æ€§ã®æ¬ å¦‚ï¼‰

---

## 6. OWASP CI/CD Top 10 æº–æ‹ è©•ä¾¡

| OWASPè„…å¨                                                 | è©•ä¾¡            | è©³ç´°                                       |
| --------------------------------------------------------- | --------------- | ------------------------------------------ |
| **CICD-SEC-1**: Insufficient Flow Control Mechanisms      | âœ… **åˆæ ¼**     | ãƒ–ãƒ©ãƒ³ãƒä¿è­·ã€PRãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆåŒ–å®Ÿè£…æ¸ˆã¿     |
| **CICD-SEC-2**: Inadequate Identity and Access Management | âœ… **åˆæ ¼**     | GitHub Actionsã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆèªè¨¼ä½¿ç”¨         |
| **CICD-SEC-3**: Dependency Chain Abuse                    | ğŸŸ¡ **æ”¹å–„ä½™åœ°** | ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼æœªå®Ÿè£…ï¼ˆMED-2025-002ï¼‰         |
| **CICD-SEC-4**: Poisoned Pipeline Execution (PPE)         | âœ… **åˆæ ¼**     | PRã‹ã‚‰ã®main/developã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›¸ãè¾¼ã¿ä¸å¯ |
| **CICD-SEC-5**: Insufficient PBAC                         | âœ… **åˆæ ¼**     | GitHubã®RBACæ©Ÿèƒ½ä½¿ç”¨                       |
| **CICD-SEC-6**: Insufficient Credential Hygiene           | âœ… **åˆæ ¼**     | ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆéœ²å‡ºãªã—ã€ç’°å¢ƒå¤‰æ•°çµŒç”±ç®¡ç†     |
| **CICD-SEC-7**: Insecure System Configuration             | âœ… **åˆæ ¼**     | ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šä½¿ç”¨               |
| **CICD-SEC-8**: Ungoverned Usage of 3rd Party Services    | âœ… **åˆæ ¼**     | ã™ã¹ã¦ã®ActionsãŒSHA-256ãƒ”ãƒ³å›ºå®š           |
| **CICD-SEC-9**: Improper Artifact Integrity Validation    | ğŸŸ¡ **æ”¹å–„ä½™åœ°** | ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ•´åˆæ€§æ¤œè¨¼æœªå®Ÿè£…ï¼ˆMED-2025-001ï¼‰ |
| **CICD-SEC-10**: Insufficient Logging and Visibility      | âœ… **åˆæ ¼**     | æ§‹é€ åŒ–ãƒ­ã‚°ã€ç›£æŸ»ãƒ­ã‚°å®Ÿè£…æ¸ˆã¿               |

**ç·åˆã‚¹ã‚³ã‚¢**: 8/10 åˆæ ¼ã€2é …ç›®æ”¹å–„æ¨å¥¨

---

## 7. GDPR & ãƒ‡ãƒ¼ã‚¿ä¿è­·è©•ä¾¡

### 7.1 å€‹äººæƒ…å ±å‡¦ç†

**åˆ†æçµæœ**: âœ… **å€‹äººæƒ…å ±å‡¦ç†ãªã—**

- venvå†…å®¹: Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿ï¼ˆå€‹äººæƒ…å ±å«ã¾ãªã„ï¼‰
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿: æŠ€è¡“çš„ãªãƒ“ãƒ«ãƒ‰æˆæœç‰©ã®ã¿
- ãƒ­ã‚°å‡ºåŠ›: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã®ã¿ï¼ˆå€‹äººæƒ…å ±ãªã—ï¼‰

**GDPRè©²å½“æ€§**: éè©²å½“ï¼ˆå€‹äººãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã‚’ä¼´ã‚ãªã„ï¼‰

---

### 7.2 ãƒ‡ãƒ¼ã‚¿ä¿æŒæœŸé–“

**ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿æŒæœŸé–“**:

- GitHub Actionsã‚­ãƒ£ãƒƒã‚·ãƒ¥: **æœ€å¤§7æ—¥é–“**ï¼ˆGitHubå´ã®è‡ªå‹•å‰Šé™¤ï¼‰
- ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆï¼ˆå‰Šé™¤æ¸ˆã¿ï¼‰: ~~1æ—¥é–“~~ â†’ **0æ—¥ï¼ˆå‰Šé™¤æ¸ˆã¿ï¼‰**

**è©•ä¾¡**: âœ… **é©åˆ‡**ï¼ˆæœ€å°é™ã®ä¿æŒæœŸé–“ã€è‡ªå‹•å‰Šé™¤ï¼‰

---

## 8. ãƒªã‚¹ã‚¯ãƒãƒˆãƒªãƒƒã‚¯ã‚¹

| ãƒªã‚¹ã‚¯                                   | å¯èƒ½æ€§     | å½±éŸ¿   | ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ« | å„ªå…ˆåº¦ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹  |
| ---------------------------------------- | ---------- | ------ | ------------ | ------ | ----------- |
| **MED-2025-001**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚¤ã‚ºãƒ‹ãƒ³ã‚° | Low        | High   | Medium       | Medium | ğŸ“‹ æ”¹å–„æ¨å¥¨ |
| **MED-2025-002**: ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³æ”»æ’ƒ   | Low-Medium | Medium | Medium       | Medium | ğŸ“‹ æ”¹å–„æ¨å¥¨ |
| **LOW-2025-001**: venvæ¤œè¨¼ä¸å®Œå…¨         | Low        | Low    | Low          | Low    | ğŸ“‹ æ”¹å–„æ¨å¥¨ |

**ãƒªã‚¹ã‚¯å—å®¹åŸºæº–**:
Mediumä»¥ä¸‹ã®ãƒªã‚¹ã‚¯ã¯**å—å®¹å¯èƒ½**ï¼ˆç·©å’Œç­–å®Ÿè£…ã¯æ¨å¥¨ã ãŒå¿…é ˆã§ã¯ãªã„ï¼‰

---

## 9. æ¨å¥¨ç·©å’Œç­–ã¾ã¨ã‚

### 9.1 å„ªå…ˆåº¦: Highï¼ˆæœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å®Ÿè£…å¿…é ˆï¼‰

**è©²å½“ãªã—** âœ…

---

### 9.2 å„ªå…ˆåº¦: Mediumï¼ˆ1-2é€±é–“ä»¥å†…ã«å®Ÿè£…æ¨å¥¨ï¼‰

#### ğŸ“‹ **æ¨å¥¨1: pipä¾å­˜é–¢ä¿‚ã®ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼å®Ÿè£…**

**å¯¾å¿œã™ã‚‹è„†å¼±æ€§**: MED-2025-002

**å®Ÿè£…æ–¹æ³•**:

```bash
# Step 1: pip-toolsã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd backend
pip install pip-tools

# Step 2: ãƒãƒƒã‚·ãƒ¥ä»˜ããƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
pip-compile pyproject.toml --output-file=requirements.lock --generate-hashes

# Step 3: CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ›´æ–°
```

```yaml
# .github/workflows/shared-setup-python.yml (æŠœç²‹)
- name: ğŸ“¦ ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  if: steps.cache-deps.outputs.cache-hit != 'true'
  working-directory: ${{ inputs.working-directory }}
  run: |
    source venv/bin/activate

    # ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼ãƒ¢ãƒ¼ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    if [ -f requirements.lock ]; then
      pip install --require-hashes -r requirements.lock
    elif [ -f pyproject.toml ]; then
      # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: pyproject.tomlæ–¹å¼
      if [ "${{ inputs.install-dev-deps }}" == "true" ]; then
        pip install -e .[dev]
      else
        pip install -e .
      fi
    fi
```

**æœŸå¾…åŠ¹æœ**: PyPIãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ”¹ã–ã‚“ã®æ¤œå‡ºã€ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³æ”»æ’ƒé˜²æ­¢

---

#### ğŸ“‹ **æ¨å¥¨2: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ•´åˆæ€§æ¤œè¨¼ã®å®Ÿè£…**

**å¯¾å¿œã™ã‚‹è„†å¼±æ€§**: MED-2025-001

**å®Ÿè£…æ–¹æ³•**:

```yaml
# .github/workflows/backend-ci.yml (å„ã‚¸ãƒ§ãƒ–ã«è¿½åŠ )
- name: ğŸ” Verify cache integrity
  if: steps.cache-deps.outputs.cache-hit == 'true'
  working-directory: ./backend
  run: |
    source venv/bin/activate

    # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ¤œè¨¼
    pip list --format=freeze | sort > /tmp/installed.txt
    INSTALLED_HASH=$(sha256sum /tmp/installed.txt | cut -d' ' -f1)

    # æœŸå¾…ã•ã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã®æ¯”è¼ƒï¼ˆç°¡æ˜“ç‰ˆï¼‰
    EXPECTED_COUNT=$(grep -c "==" pyproject.toml || echo "0")
    INSTALLED_COUNT=$(wc -l < /tmp/installed.txt)

    if [ "$INSTALLED_COUNT" -lt "$EXPECTED_COUNT" ]; then
      echo "âš ï¸ WARNING: Package count mismatch (expected: $EXPECTED_COUNT, installed: $INSTALLED_COUNT)"
      echo "This may indicate cache corruption. Rebuilding cache..."
      exit 1  # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–ã—ã¦å†ãƒ“ãƒ«ãƒ‰
    fi

    echo "âœ… Cache integrity verified (hash: ${INSTALLED_HASH})"
```

**æœŸå¾…åŠ¹æœ**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç ´æãƒ»æ±šæŸ“ã®æ—©æœŸæ¤œå‡º

---

### 9.3 å„ªå…ˆåº¦: Lowï¼ˆæ™‚é–“ãŒã‚ã‚Œã°å®Ÿè£…ï¼‰

#### ğŸ“‹ **æ¨å¥¨3: venvæ¤œè¨¼ã®å¼·åŒ–**

**å¯¾å¿œã™ã‚‹è„†å¼±æ€§**: LOW-2025-001

**å®Ÿè£…æ–¹æ³•**: ä¸Šè¨˜ã€Œ2.4 Lowè„†å¼±æ€§ã€ã®ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’å‚ç…§

**æœŸå¾…åŠ¹æœ**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¾©å…ƒã‚¨ãƒ©ãƒ¼ã®æ—©æœŸæ¤œå‡ºã€ãƒ‡ãƒãƒƒã‚°åŠ¹ç‡å‘ä¸Š

---

#### ğŸ“‹ **æ¨å¥¨4: æ¨©é™ã®æ˜ç¤ºçš„å®šç¾©**

**å¯¾å¿œã™ã‚‹è„†å¼±æ€§**: ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å¯è¦–æ€§å‘ä¸Š

**å®Ÿè£…æ–¹æ³•**:

```yaml
# .github/workflows/backend-ci.yml
jobs:
  quality-checks:
    name: ğŸ” Quality Checks
    runs-on: ubuntu-latest
    needs: setup-environment

    permissions:
      contents: read
      # å¿…è¦ã«å¿œã˜ã¦è¿½åŠ 

    strategy:
      # ... æ—¢å­˜ã®è¨­å®š
```

**æœŸå¾…åŠ¹æœ**: æœ€å°æ¨©é™åŸå‰‡ã®æ˜ç¤ºçš„é©ç”¨ã€ç›£æŸ»å®¹æ˜“æ€§å‘ä¸Š

---

## 10. ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è©•ä¾¡

### 10.1 æ¥­ç•Œæ¨™æº–æº–æ‹ 

| æ¨™æº–                     | æº–æ‹ çŠ¶æ³        | è©³ç´°                                       |
| ------------------------ | --------------- | ------------------------------------------ |
| **SLSA Level 2**         | âœ… **æº–æ‹ **     | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ”ãƒ³ã€å†ç¾å¯èƒ½ãƒ“ãƒ«ãƒ‰             |
| **SLSA Level 3**         | ğŸŸ¡ **éƒ¨åˆ†æº–æ‹ ** | ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼æœªå®Ÿè£…ï¼ˆæ¨å¥¨2ã§å¯¾å¿œï¼‰          |
| **NIST SP 800-218**      | âœ… **æº–æ‹ **     | å®‰å…¨ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯       |
| **CIS Docker Benchmark** | âœ… **æº–æ‹ **     | Dockerãƒ“ãƒ«ãƒ‰ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ |

---

### 10.2 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼æº–æ‹ 

**è©•ä¾¡å¯¾è±¡**: `docs/security/SECURITY_POLICY.md`ã¨ã®æ•´åˆæ€§

- âœ… **è„†å¼±æ€§å¯¾å¿œ**: Dependabotè‡ªå‹•PRã€é€±æ¬¡ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
- âœ… **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: GitHub RBACã€PRãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆ
- âœ… **ç›£æŸ»ãƒ­ã‚°**: audit-logging.ymlã«ã‚ˆã‚‹å®Œå…¨ãƒˆãƒ¬ãƒ¼ã‚¹
- âœ… **ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ**: security-incident.ymlã«ã‚ˆã‚‹è‡ªå‹•ã‚¢ãƒ©ãƒ¼ãƒˆ

**ç·åˆè©•ä¾¡**: âœ… **å®Œå…¨æº–æ‹ **

---

## 11. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ & ã‚³ã‚¹ãƒˆå½±éŸ¿

### 11.1 å®Ÿè¡Œæ™‚é–“æ¯”è¼ƒ

| ãƒ•ã‚§ãƒ¼ã‚º               | å¤‰æ›´å‰                                      | å¤‰æ›´å¾Œ                              | å·®åˆ†      |
| ---------------------- | ------------------------------------------- | ----------------------------------- | --------- |
| **setup-environment**  | ~3åˆ†                                        | ~3åˆ†                                | Â±0ç§’      |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆæ™‚** | download-artifact (~15ç§’) + tarå±•é–‹ (~10ç§’) | cacheå¾©å…ƒ (~5ç§’)                    | **-20ç§’** |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹æ™‚**   | venvä½œæˆ (~2åˆ†) + upload (~20ç§’)            | venvä½œæˆ (~2åˆ†) + cacheä¿å­˜ (~10ç§’) | **-10ç§’** |

**ç·åˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å½±éŸ¿**: âœ… **10-20ç§’ã®é«˜é€ŸåŒ–**ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆæ™‚ï¼‰

---

### 11.2 GitHub Actionsã‚³ã‚¹ãƒˆå½±éŸ¿

**ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ**:

- ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆå‰Šé™¤: **-500MB/æœˆ** (7 jobs Ã— 100MB Ã— 30æ—¥ / 30 = ~500MBå‰Šæ¸›)
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä½¿ç”¨: **+100MB/æœˆ** (æœ€å¤§7æ—¥ä¿æŒ Ã— 1å›/æ—¥ = ~100MBå¢—åŠ )
- **ç´”å‰Šæ¸›**: -400MB/æœˆ

**å®Ÿè¡Œæ™‚é–“ã‚³ã‚¹ãƒˆ**:

- ä¸¦åˆ—å®Ÿè¡Œã‚¸ãƒ§ãƒ–: 7ã‚¸ãƒ§ãƒ– Ã— 20ç§’å‰Šæ¸› = **140ç§’/å®Ÿè¡Œå‰Šæ¸›**
- æœˆé–“å®Ÿè¡Œå›æ•°: ~30å®Ÿè¡Œï¼ˆPush + PRï¼‰
- **æœˆé–“å‰Šæ¸›**: 140ç§’ Ã— 30å®Ÿè¡Œ = **4,200ç§’ (70åˆ†) å‰Šæ¸›**

**ã‚³ã‚¹ãƒˆè©•ä¾¡**: âœ… **æœˆé–“70åˆ†ã®Actionsä½¿ç”¨é‡å‰Šæ¸›**ï¼ˆç„¡æ–™æ ã¸ã®è²¢çŒ®ï¼‰

---

## 12. ç›£æŸ»ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£

### 12.1 å¤‰æ›´å±¥æ­´

```bash
# ã‚³ãƒŸãƒƒãƒˆå±¥æ­´
e770dfc fix(ci): setup-environmentå…±æœ‰ã‚¸ãƒ§ãƒ–ã®venvé…å¸ƒæ–¹æ³•ã‚’æ ¹æœ¬ä¿®æ­£
  â”œâ”€ shared-setup-python.yml: ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆå‰Šé™¤ã€æ¤œè¨¼è¿½åŠ 
  â””â”€ backend-ci.yml: setup-environmentä¾å­˜å¾©æ´»ã€venvæ¤œè¨¼è¿½åŠ 

# é–¢é€£ã‚³ãƒŸãƒƒãƒˆ
edd95c5 style(backend): Black Formatteræº–æ‹ ã®ã‚³ãƒ¼ãƒ‰æ•´å½¢
2ca25ce fix(ci): ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§venvå†æ§‹ç¯‰ã‚’å¼·åˆ¶
024a974 fix(ci): Backend CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¾å­˜é–¢ä¿‚æˆ¦ç•¥ã‚’æ ¹æœ¬ä¿®æ­£
```

**ç›£æŸ»ãƒ­ã‚°**: `audit-logging.yml`ã«ã‚ˆã‚‹å®Œå…¨ãƒˆãƒ¬ãƒ¼ã‚¹æ¸ˆã¿ âœ…

---

### 12.2 ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹

- âœ… **è‡ªå‹•ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³**: CodeQLã€TruffleHogå®Ÿè¡Œæ¸ˆã¿
- âœ… **Dependabot**: ä¾å­˜é–¢ä¿‚ã®è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯æ¸ˆã¿
- âœ… **äººé–“ã«ã‚ˆã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼**: æœ¬ãƒ¬ãƒãƒ¼ãƒˆ
- ğŸ“‹ **å¿…è¦ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: PRãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã«ã‚ˆã‚‹æœ€çµ‚æ‰¿èª

---

## 13. æœ€çµ‚æ‰¿èªåˆ¤æ–­

### 13.1 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ‰¿èªåŸºæº–

| åŸºæº–                   | è©•ä¾¡                      | åˆ¤å®š         |
| ---------------------- | ------------------------- | ------------ |
| **Criticalè„†å¼±æ€§ã‚¼ãƒ­** | âœ… 0ä»¶                    | åˆæ ¼         |
| **Highè„†å¼±æ€§ã‚¼ãƒ­**     | âœ… 0ä»¶                    | åˆæ ¼         |
| **Mediumè„†å¼±æ€§å¯¾ç­–**   | ğŸŸ¡ 2ä»¶ï¼ˆæ”¹å–„æ¨å¥¨ï¼‰        | æ¡ä»¶ä»˜ãåˆæ ¼ |
| **OWASPæº–æ‹ **          | âœ… 8/10é …ç›®åˆæ ¼           | åˆæ ¼         |
| **GDPRæº–æ‹ **           | âœ… éè©²å½“ï¼ˆå€‹äººæƒ…å ±ãªã—ï¼‰ | åˆæ ¼         |
| **ã‚³ã‚¹ãƒˆå½±éŸ¿**         | âœ… 70åˆ†/æœˆå‰Šæ¸›            | åˆæ ¼         |

---

### 13.2 æ‰¿èªæ±ºå®š

**æ±ºå®š**: âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ‰¿èª**ï¼ˆæ¡ä»¶ä»˜ãï¼‰

**æ¡ä»¶**:

1. Mediumå„ªå…ˆåº¦ã®ç·©å’Œç­–ï¼ˆæ¨å¥¨1, 2ï¼‰ã‚’**1-2é€±é–“ä»¥å†…ã«å®Ÿè£…**ã™ã‚‹ã“ã¨
2. æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«**æ¨å¥¨1ï¼ˆãƒãƒƒã‚·ãƒ¥æ¤œè¨¼ï¼‰ã‚’å¿…é ˆå®Ÿè£…**ã™ã‚‹ã“ã¨
3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’**å››åŠæœŸã”ã¨ã«å†å®Ÿæ–½**ã™ã‚‹ã“ã¨

**æ‰¿èªè€…**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ **æ‰¿èªæ—¥**: 2025å¹´10æœˆ6æ—¥
**æœ‰åŠ¹æœŸé™**: 2026å¹´1æœˆ6æ—¥ï¼ˆ3ãƒ¶æœˆé–“ã€æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼æœŸé™ï¼‰

---

## 14. æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### 14.1 çŸ­æœŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ1-2é€±é–“ï¼‰

- [ ] **æ¨å¥¨1**: pip-toolsã«ã‚ˆã‚‹ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼å®Ÿè£…ï¼ˆæ‹…å½“: DevOpsãƒãƒ¼ãƒ ï¼‰
- [ ] **æ¨å¥¨2**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ•´åˆæ€§æ¤œè¨¼è¿½åŠ ï¼ˆæ‹…å½“: DevOpsãƒãƒ¼ãƒ ï¼‰
- [ ] **æ¨å¥¨4**: æ¨©é™ã®æ˜ç¤ºçš„å®šç¾©ï¼ˆæ‹…å½“: DevOpsãƒãƒ¼ãƒ ï¼‰

---

### 14.2 ä¸­é•·æœŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ1-3ãƒ¶æœˆï¼‰

- [ ] requirements.txtã¨pyproject.tomlã®çµ±ä¸€ï¼ˆæ‹…å½“: Backendãƒãƒ¼ãƒ ï¼‰
- [ ] SLSA Level 3å®Œå…¨æº–æ‹ ï¼ˆæ‹…å½“: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ ï¼‰
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ï¼ˆæ‹…å½“: Observabilityãƒãƒ¼ãƒ ï¼‰

---

## 15. ä»˜éŒ²

### 15.1 å‚è€ƒæ–‡çŒ®

- [OWASP CI/CD Security Top 10](https://owasp.org/www-project-top-10-ci-cd-security-risks/)
- [SLSA Framework](https://slsa.dev/)
- [GitHub Actions Security Best Practices](https://docs.github.com/en/actions/security-guides/security-hardening-for-github-actions)
- [NIST SP 800-218: Secure Software Development Framework](https://csrc.nist.gov/publications/detail/sp/800-218/final)

---

### 15.2 å¤‰æ›´å±¥æ­´

| æ—¥ä»˜       | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ | æ‰¿èªè€…                             |
| ---------- | ---------- | -------- | ---------------------------------- |
| 2025-10-06 | 1.0        | åˆç‰ˆä½œæˆ | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ |

---

**ãƒ¬ãƒãƒ¼ãƒˆçµ‚äº†**

**é€£çµ¡å…ˆ**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®è³ªå•ã¯`docs/security/SECURITY_POLICY.md`ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
