# プロンプト作成支援システム 構想整理書

https://claude.ai/share/6ec476bb-b976-4896-a741-1c8a80cd07be

## 1. プロダクトビジョン

### 核心的な価値提案

**「誰でも使える、常に進化する、パーソナライズされたプロンプト作成支援システム」**

- プロンプト作成スキルがない人でも高品質なプロンプトを作成可能
- 各ユーザーに最適化されたプロンプトを生成
- 最新のプロンプト技術を常に反映できる変更容易性の高い設計

## 2. 解決すべき主要課題

### 2.1 現状の問題点

- **既存ツールの限界**
    - OpenAI等のプロンプトジェネレータはコンテキスト不足で実用的でない
    - 個人用メタプロンプトは他者には使いづらい

### 2.2 ユーザーの根本的課題

- **言語化能力の問題**
    - ユーザーは自分の基準や好みを言葉に落とせない
    - 差分修正指示ができない
- **技術的制約**
    - コンテキストウィンドウの制限
    - 非構造的な対話によるインコンテキストラーニングの不安定性

## 3. システム要件

### 3.1 コア機能要件

#### プロンプト作成機能

- コンテキスト保管・管理機能
- 対話型プロンプト生成（会話しながら自然に完成）
- 複数フォーマット対応（YAML、JSON、Markdown）
- モデル別最適化（使用モデルに応じたプロンプト生成）

#### 検証・改善機能

- システム内での検証環境
- 検証用ユーザーインプット自動生成
- モデル切り替え検証
- プロンプト調整アドバイス機能

#### 知識統合機能

- 論文検索・内容反映機能
- 新規プロンプト要素の追加・変更機能
- RAGへの情報追加

### 3.2 ユーザー体験要件

#### パーソナライゼーション

- ユーザー固有の形式・スタイルへの対応
- 出力制御のカスタマイズ
- 禁止事項・出力トーンの設定

#### 学習・成長支援

- 質問回答形式でのスキル向上
- プロンプト解説機能
- 修正差分の可視化
- 進捗度・完成度の表示

#### 管理機能

- バージョン管理
- フロー構築
- プロンプトの修正履歴管理

### 3.3 技術要件

- Discord連携（初期UI）
- AIコンパニオンインターフェース
- 画像・動画による視覚的説明

## 4. 具体的実装アイデア（優先度順）

### 【最優先】基盤機能

#### 1. 意図差分ビューワー（Intent Diffoscope）

- **目的**: ユーザーの意図と現行プロンプトの差分を可視化・自動修復
- **実装**: 自然言語で「やりたいこと」を抽出 → プロンプト構造へマッピング → 未充足箇所の表示 → 修正案自動提案

#### 2. プロンプトSLO（Ops-Grade Metrics）

- **目的**: プロンプトに運用品質指標を導入
- **指標**: 正確性、再現性、禁則違反率、コスト
- **実装**: 回帰テスト → SLO監視 → 自動ロールバック機能

#### 3. スタイル・ゲノム（User Style Vector）

- **目的**: ユーザー固有のスタイルを抽出・再現
- **実装**: 過去良作のコーパス化 → スタイル統計分析 → YAML化 → プロンプト注入

### 【高優先度】検証・改善機能

#### 4. プロンプト・ジェンガ（Mutation Fuzz）

- **目的**: プロンプトの頑丈さを自動テスト
- **実装**: 100変種生成 → 品質・一貫性・禁則遵守の自動採点 → 脆弱箇所の補強

#### 5. 影武者（Adversarial Twin）

- **目的**: 対抗プロンプトで耐性向上
- **実装**: 悪意のない無理解、過剰一般化等のパターンで対戦 → 自動補強

#### 6. レグレット・リプレイ（Human-Edit Feedback）

- **目的**: 人間の編集を学習データ化
- **実装**: 編集差分収集 → エラー分類 → few-shotとして次回注入

### 【中優先度】運用支援機能

#### 7. コンテキストTTL（Staleness Guard）

- **目的**: 古い情報による事故防止
- **実装**: TTL/バージョンのメタ情報付与 → 期限警告 → 自動更新依頼

#### 8. 逆向きRAG（Answer-First Contexting）

- **目的**: 最終形から逆算してコンテキスト収集
- **実装**: 理想出力の骨子 → 必要根拠スロット生成 → RAG充填

### 【実験的機能】

#### 9. 文脈アイソトープ（Ablation Attribution）

- **目的**: どのコンテキストが出力に影響したか可視化
- **実装**: LOCO法による影響度分析 → 影響スパークライン表示

#### 10. 墓地と蘇生（Prompt Cemetery & Necromancer）

- **目的**: 失敗プロンプトから学習
- **実装**: 失敗作の死亡診断書発行 → 類似課題での蘇生合成

## 5. ユーザーインタラクション設計

### 5.1 対話型設計の方針

- **2週間学習モデル**: ユーザーの趣味嗜好を観測して振る舞いを決定
- **委ね度制御**: テーマによって文脈依存性とゴール収束を調整
- **ツッコミ型改善**: 「すぐ言う（AI）⇆ わかんない（人）」の掛け合いで改善

### 5.2 入力支援方法

- **選択肢提供**: 言語化できないユーザーへの支援
- **例示提供**: 具体例からの学習
- **ゴールシーク**: 成功定義と再現手順の強制入力
- **フォーマットサンプル**: 具体的なサンプルからのフォーマット自動生成

### 5.3 視覚的支援

- **図解・画像での説明**: 理解促進
- **プロンプト作成過程の可視化**: 進捗表示
- **差分ビジュアライゼーション**: 変更内容の視覚化

## 6. 技術アーキテクチャ概要

### 6.1 データ管理

- **コンテキスト管理**: 構造化されたコンテキスト保管システム
- **バージョン管理**: Git連携によるプロンプト履歴管理
- **メタデータ管理**: TTL、バージョン、監査責任者情報

### 6.2 処理フロー

1. **入力処理**: 自然言語 → 構造化データ変換
2. **生成処理**: モデル別最適化 → プロンプト生成
3. **検証処理**: 自動テスト → 品質評価
4. **改善処理**: フィードバック収集 → 自動補強

### 6.3 外部連携

- **Discord**: 初期UI実装
- **論文DB**: 最新技術の自動反映
- **Webhook**: 更新検知・自動スキャン

## 7. 開発アプローチ

### 7.1 段階的実装計画

1. **Phase 1**: 基本的な対話型プロンプト生成
2. **Phase 2**: 検証・改善機能の実装
3. **Phase 3**: パーソナライゼーション強化
4. **Phase 4**: 運用支援機能の充実

### 7.2 開発方針

- **ボトムアップアプローチ**: 小さく始めて段階的に拡張
- **手探り型開発**: 作りながら考える
- **ユーザーフィードバック重視**: 実際の使用感から改善

## 8. 成功指標

### 8.1 定量指標

- プロンプト生成成功率: 85%以上
- ハルシネーション率: 5%以下
- スタイル一致率: 90%以上
- トークンコスト: 12,000以下

### 8.2 定性指標

- プロンプト作成未経験者の利用満足度
- プロンプト作成時間の短縮
- 生成品質の向上度

## 9. 今後の検討事項

### 9.1 技術的課題

- コンテキストウィンドウ制限への対応
- 非構造的対話の構造化方法
- 賞味期限の定義と自動判定

### 9.2 UX課題

- 言語化できないユーザーへの支援強化
- 適切な「委ね度」の自動調整
- Chat UIの限界への対応

### 9.3 運用課題

- 継続的な技術更新の仕組み
- ユーザーごとのカスタマイズ管理
- 品質保証プロセスの確立

---

この構想を基に、**まずは小さく始めて、ユーザーフィードバックを受けながら段階的に機能を拡張**していく方針で製品開発を進めることを推奨します。特に「意図差分ビューワー」「プロンプトSLO」「スタイル・ゲノム」の3つを初期コア機能として実装することで、基本的な価値提供が可能になると考えられます。