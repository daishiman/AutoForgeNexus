# Phase 5 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ç§»è¡Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

**ä½œæˆæ—¥**: 2025å¹´10æœˆ8æ—¥
**ç›®çš„**: Phase 3 â†’ Phase 5 ç§»è¡Œæ™‚ã®CI/CDå•é¡Œã‚’äº‹å‰ã«é˜²æ­¢

---

## ğŸ¯ Phase 5ç§»è¡Œå‰ã®å¿…é ˆç¢ºèªäº‹é …

### 1. ç’°å¢ƒå¤‰æ•°æ›´æ–°

```yaml
# .github/workflows/integration-ci.yml
# .github/workflows/frontend-ci.yml
env:
  CURRENT_PHASE: '5'  # '3' â†’ '5' ã«æ›´æ–°
```

**ç¢ºèªæ–¹æ³•**:
```bash
grep -r "CURRENT_PHASE:" .github/workflows/
# ã™ã¹ã¦ '5' ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
```

---

### 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¾å­˜é–¢ä¿‚ã®äº‹å‰æ¤œè¨¼

**Phase 5ç€æ‰‹å‰ï¼ˆPhase 4å®Œäº†æ™‚ï¼‰ã«å®Ÿæ–½**:

```bash
# 1. ãƒ­ãƒ¼ã‚«ãƒ«ã§ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd frontend
pnpm install

# 2. å‹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
pnpm type-check
# ã‚¨ãƒ©ãƒ¼: 0ä»¶ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª

# 3. Lintå®Ÿè¡Œ
pnpm lint
# ã‚¨ãƒ©ãƒ¼: 0ä»¶ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª

# 4. ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
pnpm build
# æˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª

# 5. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test:ci
# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒåˆæ ¼ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
```

**æœŸå¾…çµæœ**:
- âœ… TypeScriptå‹ã‚¨ãƒ©ãƒ¼: 0ä»¶
- âœ… ESLintè­¦å‘Š: 0ä»¶
- âœ… ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- âœ… ãƒ†ã‚¹ãƒˆ: ã™ã¹ã¦åˆæ ¼

---

### 3. CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ‰‹å‹•ãƒ†ã‚¹ãƒˆ

**GitHub Actions ã§æ‰‹å‹•å®Ÿè¡Œ**:

```bash
# 1. frontend-ci.yml ã‚’æ‰‹å‹•ãƒˆãƒªã‚¬ãƒ¼
gh workflow run frontend-ci.yml \
  --ref feature/phase5-frontend \
  -f CURRENT_PHASE=5

# 2. å®Ÿè¡ŒçŠ¶æ³ã‚’ç›£è¦–
gh run watch

# 3. çµæœç¢ºèª
gh run list --workflow=frontend-ci.yml --limit 1
```

**ç¢ºèªé …ç›®**:
- âœ… quality-checks: ã™ã¹ã¦åˆæ ¼
- âœ… test-suite: unit/e2eåˆæ ¼
- âœ… production-build: ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆç”ŸæˆæˆåŠŸ
- âœ… performance-audit: Lighthouse CIå®Ÿè¡ŒæˆåŠŸ
- âœ… docker-build: ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- âœ… deployment-prep: ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™å®Œäº†

---

### 4. æ¬ è½ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª

**Phase 5å®Ÿè£…å‰ã«ä½œæˆãŒå¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«**:

```bash
# ã™ã§ã«å­˜åœ¨ï¼ˆå•é¡Œãªã—ï¼‰
frontend/src/lib/utils.ts âœ…
frontend/src/lib/monitoring/web-vitals.ts âœ…

# Phase 5ã§å®Ÿè£…ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
frontend/src/lib/api/client.ts
frontend/src/lib/hooks/use-prompt.ts
frontend/src/components/prompt/PromptEditor.tsx
```

---

### 5. Dockerçµ±åˆç¢ºèª

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰Dockerfileæ¤œè¨¼**:

```bash
# 1. Dockerfileå­˜åœ¨ç¢ºèª
ls -la frontend/Dockerfile

# 2. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
cd frontend
docker build -t autoforgenexus-frontend:test .

# 3. ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ãƒ†ã‚¹ãƒˆ
docker run -p 3000:3000 autoforgenexus-frontend:test
curl http://localhost:3000
```

**æœŸå¾…çµæœ**:
- âœ… DockerfileãŒå­˜åœ¨
- âœ… ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- âœ… ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æˆåŠŸ
- âœ… ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å¿œç­”

---

### 6. Integration CIç¢ºèª

**ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯çµ±åˆãƒ†ã‚¹ãƒˆ**:

```bash
# integration-ci.yml ã® Phase 5å¯¾å¿œç¢ºèª
grep "CURRENT_PHASE" .github/workflows/integration-ci.yml

# æœŸå¾…:
# - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å¾…æ©Ÿãƒ­ã‚¸ãƒƒã‚¯æœ‰åŠ¹åŒ–
# - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æœ‰åŠ¹åŒ–
# - E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```

**ç¢ºèªé …ç›®**:
- âœ… ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆlocalhost:8000ï¼‰
- âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆlocalhost:3000ï¼‰
- âœ… ä¸¡æ–¹ã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æˆåŠŸ
- âœ… E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

---

## ğŸ“‹ Phase 5ç§»è¡Œæ‰‹é †

### Step 1: Phase 4å®Œäº†ç¢ºèª

```bash
# Phase 4è¦ä»¶å®Œäº†ãƒã‚§ãƒƒã‚¯
- [ ] Turso/Redisçµ±åˆå®Œäº†
- [ ] LiteLLMçµ±åˆå®Œäº†
- [ ] CQRSå®Ÿè£…å®Œäº†
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹å®Ÿè£…å®Œäº†
```

### Step 2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åŸºæœ¬å®Ÿè£…

```bash
# 1. Next.js 15.5.4 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
cd frontend
pnpm install

# 2. åŸºæœ¬ãƒšãƒ¼ã‚¸å®Ÿè£…
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ/dashboardï¼‰
- [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆ/prompt/editorï¼‰
- [ ] è©•ä¾¡çµæœï¼ˆ/evaluationï¼‰

# 3. APIçµ±åˆ
- [ ] ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIæ¥ç¶š
- [ ] èªè¨¼ï¼ˆClerkï¼‰çµ±åˆ
```

### Step 3: CI/CDæ®µéšçš„æœ‰åŠ¹åŒ–

```bash
# 1. ç’°å¢ƒå¤‰æ•°æ›´æ–°
# CURRENT_PHASE: '3' â†’ '5'

# 2. æ‰‹å‹•ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œï¼ˆæ¤œè¨¼ï¼‰
gh workflow run frontend-ci.yml

# 3. ã‚¨ãƒ©ãƒ¼ä¿®æ­£

# 4. è‡ªå‹•å®Ÿè¡Œæœ‰åŠ¹åŒ–ï¼ˆmain/developãƒãƒ¼ã‚¸æ™‚ï¼‰
```

### Step 4: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# 1. Cloudflare Pagesè¨­å®š
wrangler pages project create autoforgenexus-frontend

# 2. ç’°å¢ƒå¤‰æ•°è¨­å®š
wrangler pages secret put NEXT_PUBLIC_API_URL
wrangler pages secret put CLERK_SECRET_KEY

# 3. ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
pnpm build
wrangler pages deploy frontend/out
```

---

## ğŸš¨ Phase 5ç§»è¡Œæ™‚ã®æ—¢çŸ¥ã®ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| **ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼** | é«˜ | Phase 4å®Œäº†æ™‚ã«pnpm installãƒ†ã‚¹ãƒˆ |
| **å‹ã‚¨ãƒ©ãƒ¼å¤§é‡ç™ºç”Ÿ** | ä¸­ | æ®µéšçš„å‹å®šç¾©è¿½åŠ  |
| **E2Eãƒ†ã‚¹ãƒˆå¤±æ•—** | ä¸­ | Playwrightè¨­å®šè¦‹ç›´ã— |
| **ãƒ“ãƒ«ãƒ‰æ™‚é–“è¶…é** | ä½ | Turbopackæœ€é©åŒ– |
| **ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚µã‚¤ã‚ºè¶…é** | ä½ | .dockerignoreæœ€é©åŒ– |

---

## âœ… Phase 5ç§»è¡ŒæˆåŠŸåŸºæº–

### å¿…é ˆæ¡ä»¶

- âœ… ã™ã¹ã¦ã®CI/CDã‚¸ãƒ§ãƒ–ãŒæˆåŠŸ
- âœ… ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸75%é”æˆ
- âœ… TypeScriptå‹ã‚¨ãƒ©ãƒ¼0ä»¶
- âœ… Lighthouse CI: ã™ã¹ã¦ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚°ãƒªãƒ¼ãƒ³
- âœ… Docker buildæˆåŠŸ
- âœ… E2Eãƒ†ã‚¹ãƒˆåˆæ ¼

### æ¨å¥¨æ¡ä»¶

- âœ… ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º < 500KB
- âœ… ãƒ“ãƒ«ãƒ‰æ™‚é–“ < 60ç§’
- âœ… Core Web Vitalsé”æˆ
  - LCP < 2.5s
  - FID < 100ms
  - CLS < 0.1

---

## ğŸ“ Phase 5å®Ÿè£…å‰ã®æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### ä»Šã™ãå®Ÿæ–½å¯èƒ½ï¼ˆãƒªã‚¹ã‚¯ä½æ¸›ï¼‰

1. **æœ€å°é™ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ¤œè¨¼**
```bash
cd frontend
pnpm install  # ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm type-check  # å‹ãƒã‚§ãƒƒã‚¯ï¼ˆã‚¨ãƒ©ãƒ¼ç¢ºèªï¼‰
```

2. **CI/CDæ‰‹å‹•ãƒ†ã‚¹ãƒˆ**
```bash
# workflow_dispatch ã§æ‰‹å‹•å®Ÿè¡Œ
gh workflow run frontend-ci.yml
```

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¢ºèª**
```bash
# Phase 5å®Ÿè£…è¦ä»¶ã®å†ç¢ºèª
cat docs/setup/PHASE5_*.md
```

---

## ğŸ¯ çµè«–

**ç¾åœ¨ã®Phaseåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯**:
- âœ… Phase 3ã§ã¯å•é¡Œãªã—ï¼ˆã™ã¹ã¦ã‚¹ã‚­ãƒƒãƒ—ï¼‰
- âš ï¸ Phase 5ç§»è¡Œæ™‚ã«ä¸€æ–‰æœ‰åŠ¹åŒ–ã•ã‚Œã‚‹ãƒªã‚¹ã‚¯

**æ¨å¥¨å¯¾å¿œ**:
1. **Phase 4å®Œäº†æ™‚**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¾å­˜é–¢ä¿‚ã®äº‹å‰æ¤œè¨¼
2. **Phase 5ç€æ‰‹å‰**: CI/CDæ‰‹å‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
3. **Phase 5å®Ÿè£…ä¸­**: æ®µéšçš„ã‚¸ãƒ§ãƒ–æœ‰åŠ¹åŒ–

**ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®ãƒªã‚¹ã‚¯**: ä¸­ç¨‹åº¦
**ãƒªã‚¹ã‚¯è»½æ¸›ç­–**: æœ¬ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã«å¾“ã£ãŸæ®µéšçš„ç§»è¡Œã§å¯¾å¿œå¯èƒ½

---

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: Phase 4å®Œäº†å¾Œã€æœ¬ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã«åŸºã¥ã„ã¦ç§»è¡Œæº–å‚™ã‚’é–‹å§‹
