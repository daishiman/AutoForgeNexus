# GitHub Labeler configuration for auto-labeling PRs
# v5 syntax: Each label must have an array of match objects
# Reference: https://github.com/actions/labeler/blob/v5/README.md
#
# Usage in workflow:
#   uses: actions/labeler@v5
#   with:
#     configuration-path: .github/labeler.yml
#     sync-labels: false
#     dot: true

backend:
  - changed-files:
      - any-glob-to-any-file:
          - backend/**/*
          - "*.py"
          - requirements*.txt
          - Pipfile*
          - pyproject.toml
          - alembic.ini

frontend:
  - changed-files:
      - any-glob-to-any-file:
          - frontend/**/*
          - "*.ts"
          - "*.tsx"
          - "*.js"
          - "*.jsx"
          - package*.json
          - tsconfig*.json
          - next.config.js

documentation:
  - changed-files:
      - any-glob-to-any-file:
          - docs/**/*
          - "*.md"
          - README*
          - CONTRIBUTING*
          - CHANGELOG*

docker:
  - changed-files:
      - any-glob-to-any-file:
          - docker/**/*
          - Dockerfile*
          - docker-compose*.yml
          - .dockerignore

ci/cd:
  - changed-files:
      - any-glob-to-any-file:
          - .github/workflows/*
          - .github/actions/*
          - scripts/deploy*
          - scripts/ci*

testing:
  - changed-files:
      - any-glob-to-any-file:
          - tests/**/*
          - test/**/*
          - "*test*.py"
          - "*test*.ts"
          - "*test*.js"
          - jest.config*
          - pytest.ini
          - .coveragerc

database:
  - changed-files:
      - any-glob-to-any-file:
          - migrations/**/*
          - alembic/**/*
          - "*.sql"
          - schema/**/*

security:
  - changed-files:
      - any-glob-to-any-file:
          - security/**/*
          - .github/dependabot.yml
          - SECURITY.md
          - "*auth*"
          - "*security*"

dependencies:
  - changed-files:
      - any-glob-to-any-file:
          - requirements*.txt
          - package*.json
          - Pipfile*
          - pyproject.toml
          - pnpm-lock.yaml
          - poetry.lock

configuration:
  - changed-files:
      - any-glob-to-any-file:
          - .editorconfig
          - .prettierrc*
          - .eslintrc*
          - .gitignore
          - .gitattributes
          - "*.config.js"
          - "*.config.ts"
          - .env.example

ai/ml:
  - changed-files:
      - any-glob-to-any-file:
          - ml/**/*
          - prompts/**/*
          - evaluations/**/*
          - "*llm*"
          - "*ai*"
          - "*vector*"

# 高度な設定例（オプション）

# 複数条件でのラベル付け例
critical:
  - changed-files:
      - any-glob-to-any-file:
          - .github/workflows/deploy-*.yml
          - infrastructure/**/*
          - "*security*"

# ファイル追加時のみラベル付ける例
new-feature:
  - head-branch: ['^feature/', '^feat/']
  - changed-files:
      - added-files:
          - "**/*"

# ファイル削除時のラベル例
cleanup:
  - changed-files:
      - deleted-files:
          - "**/*"

# 特定サイズ以上の変更にラベル付け
large:
  - changed-files:
      - any-glob-to-any-file:
          - "**/*"
      - file-count: ">10"

# 特定ブランチパターンでのラベル
hotfix:
  - head-branch: ['^hotfix/']

bugfix:
  - head-branch: ['^fix/', '^bugfix/']

enhancement:
  - head-branch: ['^enhance/', '^improvement/']

# 特定ファイルが変更された場合の重要度ラベル
needs-review:
  - changed-files:
      - any-glob-to-any-file:
          - "*.sql"
          - "**/migrations/**"
          - ".github/workflows/**"
          - "*security*"